{"ast":null,"code":"import _classCallCheck from \"/Users/eliapirrello/Documents/GitHub/zenyth/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/eliapirrello/Documents/GitHub/zenyth/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _assertThisInitialized from \"/Users/eliapirrello/Documents/GitHub/zenyth/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";\nimport _get from \"/Users/eliapirrello/Documents/GitHub/zenyth/node_modules/@babel/runtime/helpers/esm/get.js\";\nimport _getPrototypeOf from \"/Users/eliapirrello/Documents/GitHub/zenyth/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";\nimport _inherits from \"/Users/eliapirrello/Documents/GitHub/zenyth/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/Users/eliapirrello/Documents/GitHub/zenyth/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport { Gain } from \"../../core/context/Gain\";\nimport { Param } from \"../../core/context/Param\";\nimport { ToneAudioNode } from \"../../core/context/ToneAudioNode\";\nimport { optionsFromArguments } from \"../../core/util/Defaults\";\nimport { readOnly } from \"../../core/util/Interface\";\nimport { AudioToGain } from \"../../signal/AudioToGain\";\nimport { Scale } from \"../../signal/Scale\";\nimport { connectSignal, Signal } from \"../../signal/Signal\";\nimport { Zero } from \"../../signal/Zero\";\nimport { Oscillator } from \"./Oscillator\";\n/**\n * LFO stands for low frequency oscillator. LFO produces an output signal\n * which can be attached to an AudioParam or Tone.Signal\n * in order to modulate that parameter with an oscillator. The LFO can\n * also be synced to the transport to start/stop and change when the tempo changes.\n * @example\n * return Tone.Offline(() => {\n * \tconst lfo = new Tone.LFO(\"4n\", 400, 4000).start().toDestination();\n * }, 0.5, 1);\n * @category Source\n */\nexport var LFO = /*#__PURE__*/function (_ToneAudioNode) {\n  _inherits(LFO, _ToneAudioNode);\n  var _super = _createSuper(LFO);\n  function LFO() {\n    var _this;\n    _classCallCheck(this, LFO);\n    _this = _super.call(this, optionsFromArguments(LFO.getDefaults(), arguments, [\"frequency\", \"min\", \"max\"]));\n    _this.name = \"LFO\";\n    /**\n     * The value that the LFO outputs when it's stopped\n     */\n    _this._stoppedValue = 0;\n    /**\n     * A private placeholder for the units\n     */\n    _this._units = \"number\";\n    /**\n     * If the input value is converted using the [[units]]\n     */\n    _this.convert = true;\n    /**\n     * Private methods borrowed from Param\n     */\n    // @ts-ignore\n    _this._fromType = Param.prototype._fromType;\n    // @ts-ignore\n    _this._toType = Param.prototype._toType;\n    // @ts-ignore\n    _this._is = Param.prototype._is;\n    // @ts-ignore\n    _this._clampValue = Param.prototype._clampValue;\n    var options = optionsFromArguments(LFO.getDefaults(), arguments, [\"frequency\", \"min\", \"max\"]);\n    _this._oscillator = new Oscillator(options);\n    _this.frequency = _this._oscillator.frequency;\n    _this._amplitudeGain = new Gain({\n      context: _this.context,\n      gain: options.amplitude,\n      units: \"normalRange\"\n    });\n    _this.amplitude = _this._amplitudeGain.gain;\n    _this._stoppedSignal = new Signal({\n      context: _this.context,\n      units: \"audioRange\",\n      value: 0\n    });\n    _this._zeros = new Zero({\n      context: _this.context\n    });\n    _this._a2g = new AudioToGain({\n      context: _this.context\n    });\n    _this._scaler = _this.output = new Scale({\n      context: _this.context,\n      max: options.max,\n      min: options.min\n    });\n    _this.units = options.units;\n    _this.min = options.min;\n    _this.max = options.max;\n    // connect it up\n    _this._oscillator.chain(_this._amplitudeGain, _this._a2g, _this._scaler);\n    _this._zeros.connect(_this._a2g);\n    _this._stoppedSignal.connect(_this._a2g);\n    readOnly(_assertThisInitialized(_this), [\"amplitude\", \"frequency\"]);\n    _this.phase = options.phase;\n    return _this;\n  }\n  _createClass(LFO, [{\n    key: \"start\",\n    value:\n    /**\n     * Start the LFO.\n     * @param time The time the LFO will start\n     */\n    function start(time) {\n      time = this.toSeconds(time);\n      this._stoppedSignal.setValueAtTime(0, time);\n      this._oscillator.start(time);\n      return this;\n    }\n    /**\n     * Stop the LFO.\n     * @param  time The time the LFO will stop\n     */\n  }, {\n    key: \"stop\",\n    value: function stop(time) {\n      time = this.toSeconds(time);\n      this._stoppedSignal.setValueAtTime(this._stoppedValue, time);\n      this._oscillator.stop(time);\n      return this;\n    }\n    /**\n     * Sync the start/stop/pause to the transport\n     * and the frequency to the bpm of the transport\n     * @example\n     * const lfo = new Tone.LFO(\"8n\");\n     * lfo.sync().start(0);\n     * // the rate of the LFO will always be an eighth note, even as the tempo changes\n     */\n  }, {\n    key: \"sync\",\n    value: function sync() {\n      this._oscillator.sync();\n      this._oscillator.syncFrequency();\n      return this;\n    }\n    /**\n     * unsync the LFO from transport control\n     */\n  }, {\n    key: \"unsync\",\n    value: function unsync() {\n      this._oscillator.unsync();\n      this._oscillator.unsyncFrequency();\n      return this;\n    }\n    /**\n     * After the oscillator waveform is updated, reset the `_stoppedSignal` value to match the updated waveform\n     */\n  }, {\n    key: \"_setStoppedValue\",\n    value: function _setStoppedValue() {\n      this._stoppedValue = this._oscillator.getInitialValue();\n      this._stoppedSignal.value = this._stoppedValue;\n    }\n    /**\n     * The minimum output of the LFO.\n     */\n  }, {\n    key: \"min\",\n    get: function get() {\n      return this._toType(this._scaler.min);\n    },\n    set: function set(min) {\n      min = this._fromType(min);\n      this._scaler.min = min;\n    }\n    /**\n     * The maximum output of the LFO.\n     */\n  }, {\n    key: \"max\",\n    get: function get() {\n      return this._toType(this._scaler.max);\n    },\n    set: function set(max) {\n      max = this._fromType(max);\n      this._scaler.max = max;\n    }\n    /**\n     * The type of the oscillator: See [[Oscillator.type]]\n     */\n  }, {\n    key: \"type\",\n    get: function get() {\n      return this._oscillator.type;\n    },\n    set: function set(type) {\n      this._oscillator.type = type;\n      this._setStoppedValue();\n    }\n    /**\n     * The oscillator's partials array: See [[Oscillator.partials]]\n     */\n  }, {\n    key: \"partials\",\n    get: function get() {\n      return this._oscillator.partials;\n    },\n    set: function set(partials) {\n      this._oscillator.partials = partials;\n      this._setStoppedValue();\n    }\n    /**\n     * The phase of the LFO.\n     */\n  }, {\n    key: \"phase\",\n    get: function get() {\n      return this._oscillator.phase;\n    },\n    set: function set(phase) {\n      this._oscillator.phase = phase;\n      this._setStoppedValue();\n    }\n    /**\n     * The output units of the LFO.\n     */\n  }, {\n    key: \"units\",\n    get: function get() {\n      return this._units;\n    },\n    set: function set(val) {\n      var currentMin = this.min;\n      var currentMax = this.max;\n      // convert the min and the max\n      this._units = val;\n      this.min = currentMin;\n      this.max = currentMax;\n    }\n    /**\n     * Returns the playback state of the source, either \"started\" or \"stopped\".\n     */\n  }, {\n    key: \"state\",\n    get: function get() {\n      return this._oscillator.state;\n    }\n    /**\n     * @param node the destination to connect to\n     * @param outputNum the optional output number\n     * @param inputNum the input number\n     */\n  }, {\n    key: \"connect\",\n    value: function connect(node, outputNum, inputNum) {\n      if (node instanceof Param || node instanceof Signal) {\n        this.convert = node.convert;\n        this.units = node.units;\n      }\n      connectSignal(this, node, outputNum, inputNum);\n      return this;\n    }\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      _get(_getPrototypeOf(LFO.prototype), \"dispose\", this).call(this);\n      this._oscillator.dispose();\n      this._stoppedSignal.dispose();\n      this._zeros.dispose();\n      this._scaler.dispose();\n      this._a2g.dispose();\n      this._amplitudeGain.dispose();\n      this.amplitude.dispose();\n      return this;\n    }\n  }], [{\n    key: \"getDefaults\",\n    value: function getDefaults() {\n      return Object.assign(Oscillator.getDefaults(), {\n        amplitude: 1,\n        frequency: \"4n\",\n        max: 1,\n        min: 0,\n        type: \"sine\",\n        units: \"number\"\n      });\n    }\n  }]);\n  return LFO;\n}(ToneAudioNode);","map":{"version":3,"mappings":"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","names":["Gain","Param","ToneAudioNode","optionsFromArguments","readOnly","AudioToGain","Scale","connectSignal","Signal","Zero","Oscillator","LFO","getDefaults","arguments","prototype","_fromType","_toType","_is","_clampValue","options","_oscillator","frequency","_amplitudeGain","context","gain","amplitude","units","_stoppedSignal","value","_zeros","_a2g","_scaler","output","max","min","chain","connect","phase","time","toSeconds","setValueAtTime","start","_stoppedValue","stop","sync","syncFrequency","unsync","unsyncFrequency","getInitialValue","type","_setStoppedValue","partials","_units","val","currentMin","currentMax","state","node","outputNum","inputNum","convert","dispose","Object","assign"],"sourceRoot":"","sources":["../../../../Tone/source/oscillator/LFO.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module","externalDependencies":[]}