{"ast":null,"code":"import _regeneratorRuntime from \"/Users/eliapirrello/Documents/GitHub/zenyth/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport { __awaiter } from \"tslib\";\nimport { OfflineContext } from \"../../core/context/OfflineContext\";\n/**\n * Render a segment of the oscillator to an offline context and return the results as an array\n */\nexport function generateWaveform(instance, length) {\n  return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n    var duration, context, clone, buffer;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          duration = length / instance.context.sampleRate;\n          context = new OfflineContext(1, duration, instance.context.sampleRate);\n          clone = new instance.constructor(Object.assign(instance.get(), {\n            // should do 2 iterations\n            frequency: 2 / duration,\n            // zero out the detune\n            detune: 0,\n            context: context\n          })).toDestination();\n          clone.start(0);\n          _context.next = 6;\n          return context.render();\n        case 6:\n          buffer = _context.sent;\n          return _context.abrupt(\"return\", buffer.getChannelData(0));\n        case 8:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n}","map":{"version":3,"mappings":";;AAIA,SAASA,cAAc,QAAQ,mCAAmC;AAsGlE;;;AAGA,OAAM,SAAgBC,gBAAgB,CAACC,QAAa,EAAEC,MAAc;;;;;;UAC7DC,QAAQ,GAAGD,MAAM,GAAGD,QAAQ,CAACG,OAAO,CAACC,UAAU;UAC/CD,OAAO,GAAG,IAAIL,cAAc,CAAC,CAAC,EAAEI,QAAQ,EAAEF,QAAQ,CAACG,OAAO,CAACC,UAAU,CAAC;UACtEC,KAAK,GAAG,IAAIL,QAAQ,CAACM,WAAW,CAACC,MAAM,CAACC,MAAM,CAACR,QAAQ,CAACS,GAAG,EAAE,EAAE;YACpE;YACAC,SAAS,EAAE,CAAC,GAAGR,QAAQ;YACvB;YACAS,MAAM,EAAE,CAAC;YACTR,OAAO,EAAPA;WACA,CAAC,CAAC,CAACS,aAAa,EAAE;UACnBP,KAAK,CAACQ,KAAK,CAAC,CAAC,CAAC;UAAC;UACA,OAAMV,OAAO,CAACW,MAAM,EAAE;QAAA;UAA/BC,MAAM;UAAA,iCACLA,MAAM,CAACC,cAAc,CAAC,CAAC,CAAC;QAAA;QAAA;UAAA;MAAA;IAAA;EAAA,CAC/B","names":["OfflineContext","generateWaveform","instance","length","duration","context","sampleRate","clone","constructor","Object","assign","get","frequency","detune","toDestination","start","render","buffer","getChannelData"],"sourceRoot":"","sources":["../../../../Tone/source/oscillator/OscillatorInterface.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module","externalDependencies":[]}