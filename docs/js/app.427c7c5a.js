(()=>{"use strict";var e={6418:(e,t,s)=>{s(6992),s(8674),s(9601),s(7727);var n=s(9963),i=s(6252);function o(e,t,s,n,o,a){var r=(0,i.up)("router-view");return(0,i.wg)(),(0,i.j4)(r)}const a={mounted:function(){},methods:{}};var r=s(3744);const l=(0,r.Z)(a,[["render",o]]),c=l;var h=s(2201);const u=s.p+"img/zenyth_logo.a8930f6b.png";var d={class:"grid"},f=(0,i._)("img",{className:"app_logo",src:u,draggable:"false"},null,-1),p={class:"mainHost"};function v(e,t,s,n,o,a){var r=(0,i.up)("OscHost"),l=(0,i.up)("FilterHost"),c=(0,i.up)("FxHost"),h=(0,i.up)("ToolHost"),u=(0,i.up)("ModHost"),v=(0,i.up)("PianoKeyboard");return(0,i.wg)(),(0,i.iD)("div",{class:"appContainer",onMouseup:t[0]||(t[0]=function(){return a.handleMouseUp&&a.handleMouseUp.apply(a,arguments)}),onMousemove:t[1]||(t[1]=function(){return a.handleMouseMove&&a.handleMouseMove.apply(a,arguments)})},[(0,i._)("div",d,[f,(0,i._)("div",p,[(0,i.Wm)(r,{ref:"oscHost",onNewOsc:a.handleNewOsc},null,8,["onNewOsc"]),(0,i.Wm)(l,{ref:"filterHost",onFilterInitialized:a.initOscConnections},null,8,["onFilterInitialized"]),(0,i.Wm)(c,{ref:"fxHost"},null,512),(0,i.Wm)(h,{ref:"toolsHost"},null,512),(0,i.Wm)(u,{ref:"modHost"},null,512),(0,i.Wm)(v,{ref:"pianoKeyboard",onNoteDown:a.noteDownHandle,onNoteUp:a.noteUpHandle},null,8,["onNoteDown","onNoteUp"])])])],32)}s(2564);var m=s(2123),g=s(3577),y=function(e){return(0,i.dD)("data-v-744778da"),e=e(),(0,i.Cn)(),e},w={class:"scrollable"},k=y((function(){return(0,i._)("div",{class:"oscVoid"},"+",-1)})),b=[k],_=y((function(){return(0,i._)("div",{class:"oscVoid"},"+",-1)})),D=[_],M=y((function(){return(0,i._)("div",{class:"oscVoid"},"+",-1)})),x=[M];function C(e,t,s,n,o,a){var r=(0,i.up)("Osc");return(0,i.wg)(),(0,i.iD)("div",{class:"oscHost",style:(0,g.j5)(this.oscHost)},[(0,i._)("div",w,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(this.oscList,(function(e){return(0,i.wg)(),(0,i.j4)(r,{key:e.id,ref_for:!0,ref:e.ref,id:e.id,onDisposed:a.removeOsc,onNewOsc:a.handleNewOsc},null,8,["id","onDisposed","onNewOsc"])})),128)),(0,i._)("div",{class:"voidContainer",onClick:t[0]||(t[0]=function(){return a.addOsc&&a.addOsc.apply(a,arguments)})},[(0,i._)("div",{class:"voidBorder",style:(0,g.j5)(a.voidBorder)},b,4)]),this.oscList.length<=1?((0,i.wg)(),(0,i.iD)("div",{key:0,class:"voidContainer",onClick:t[1]||(t[1]=function(){return a.addOsc&&a.addOsc.apply(a,arguments)})},[(0,i._)("div",{class:"voidBorder",style:(0,g.j5)(a.voidBorder)},D,4)])):(0,i.kq)("",!0),this.oscList.length<=0?((0,i.wg)(),(0,i.iD)("div",{key:1,class:"voidContainer",onClick:t[2]||(t[2]=function(){return a.addOsc&&a.addOsc.apply(a,arguments)})},[(0,i._)("div",{class:"voidBorder",style:(0,g.j5)(a.voidBorder)},x,4)])):(0,i.kq)("",!0)])],4)}s(7658),s(9554),s(1539),s(4747),s(2772),s(561);const I=s.p+"img/sine.83ad3f35.svg",L=s.p+"img/triangle.a36c63c6.svg",F=s.p+"img/saw.fcf7fa8d.svg",U=s.p+"img/square.c0eea307.svg";var j=function(e){return(0,i.dD)("data-v-53f63126"),e=e(),(0,i.Cn)(),e},$={class:"osc"},P={class:"osc_back"},O={class:"osc_middle"},z={class:"osc_front"},N=["textContent"],E=["textContent"],T=["textContent"],R={key:0,src:I,alt:"",draggable:"false"},H={key:1,src:L,alt:"",draggable:"false"},q={key:2,src:F,alt:"",draggable:"false"},S={key:3,src:U,alt:"",draggable:"false"},K=j((function(){return(0,i._)("div",null,null,-1)})),G=j((function(){return(0,i._)("div",null,null,-1)}));function V(e,t,s,o,a,r){var l=this;return(0,i.wg)(),(0,i.iD)("div",{class:"main_container",onClick:t[26]||(t[26]=(0,n.iM)((function(){return r.dispose&&r.dispose.apply(r,arguments)}),["shift"]))},[(0,i._)("div",{class:"type_button",onClick:t[0]||(t[0]=function(){return r.nextOscType&&r.nextOscType.apply(r,arguments)}),style:(0,g.j5)(this.type_button)},[(0,i._)("div",{class:"innertext",style:(0,g.j5)(this.type_text)},(0,g.zw)(""===a.osc_types[!0]?"std":a.osc_types[this.oscTypeIndex]),5)],4),(0,i._)("div",{class:"osc_container",style:(0,g.j5)(r.osc_container)},[(0,i._)("div",$,[(0,i._)("div",P,[(0,i._)("div",{class:"mod_area",style:(0,g.j5)(this.mod_area)},null,4),(0,i._)("div",{class:"volume_area",style:(0,g.j5)(this.volume_area)},null,4),(0,i._)("div",{class:"pitch_slider",style:(0,g.j5)(this.pitch_slider)},null,4)]),(0,i._)("div",O,[(0,i._)("div",{class:"mod_slider",ref:"modulation",style:(0,g.j5)(this.mod_slider)},null,4),(0,i._)("div",{class:"volume_slider",ref:"volume",style:(0,g.j5)(this.volume_slider)},null,4)]),(0,i._)("div",z,[(0,i._)("div",{class:"pitch_area",style:(0,g.j5)(this.pitch_area)},null,4),(0,i._)("div",{class:"pitch_hand",ref:"pitch",style:(0,g.j5)(this.pitch_hand)},null,4),(0,i._)("div",{class:"lineL",style:(0,g.j5)(this.lineL)},null,4),(0,i._)("div",{class:"lineU",style:(0,g.j5)(this.lineU)},null,4),(0,i._)("div",{class:"lineR",style:(0,g.j5)(this.lineR)},null,4)]),(0,i._)("div",{class:"draggable left",onDragenter:[t[2]||(t[2]=function(e){return r.handleDragEnter("mod")}),t[4]||(t[4]=(0,n.iM)((function(){}),["prevent"]))],onDragleave:t[3]||(t[3]=function(e){return r.handleDragLeave("mod")}),onDragover:t[5]||(t[5]=(0,n.iM)((function(){}),["prevent"])),onDrop:t[6]||(t[6]=function(e){return r.handleDrop(e,"mod")}),onMousedown:t[7]||(t[7]=function(){return r.modulationDown&&r.modulationDown.apply(r,arguments)})},[(0,i._)("div",{class:"modDot",style:(0,g.j5)(r.computedModulation("mod")),onClick:t[1]||(t[1]=(0,n.iM)((function(e){return r.unlinkMod("mod")}),["shift","stop"])),textContent:(0,g.zw)(r.computedModText("mod"))},null,12,N)],32),(0,i._)("div",{class:"draggable right",onDragenter:[t[9]||(t[9]=function(e){return r.handleDragEnter("vol")}),t[11]||(t[11]=(0,n.iM)((function(){}),["prevent"]))],onDragleave:t[10]||(t[10]=function(e){return r.handleDragLeave("vol")}),onDragover:t[12]||(t[12]=(0,n.iM)((function(){}),["prevent"])),onDrop:t[13]||(t[13]=function(e){return r.handleDrop(e,"vol")}),onMousedown:t[14]||(t[14]=function(){return r.volumeDown&&r.volumeDown.apply(r,arguments)})},[(0,i._)("div",{class:"modDot",style:(0,g.j5)(r.computedModulation("vol")),onClick:t[8]||(t[8]=(0,n.iM)((function(e){return r.unlinkMod("vol")}),["shift","stop"])),textContent:(0,g.zw)(r.computedModText("vol"))},null,12,E)],32),(0,i._)("div",{class:"draggable low",onDragenter:[t[16]||(t[16]=function(e){return r.handleDragEnter("pitch")}),t[18]||(t[18]=(0,n.iM)((function(){}),["prevent"]))],onDragleave:t[17]||(t[17]=function(e){return r.handleDragLeave("pitch")}),onDragover:t[19]||(t[19]=(0,n.iM)((function(){}),["prevent"])),onDrop:t[20]||(t[20]=function(e){return r.handleDrop(e,"pitch")}),onMousedown:t[21]||(t[21]=function(){return r.pitchDown&&r.pitchDown.apply(r,arguments)})},[(0,i._)("div",{class:"modDot",style:(0,g.j5)(r.computedModulation("pitch")),onClick:t[15]||(t[15]=(0,n.iM)((function(e){return r.unlinkMod("pitch")}),["shift","stop"])),textContent:(0,g.zw)(r.computedModText("pitch"))},null,12,T)],32),(0,i._)("div",{class:"osc_wave",onClick:t[22]||(t[22]=function(){return r.nextWaveform&&r.nextWaveform.apply(r,arguments)}),style:(0,g.j5)(this.osc_wave)},[0===this.oscWaveIndex?((0,i.wg)(),(0,i.iD)("img",R)):(0,i.kq)("",!0),1===this.oscWaveIndex?((0,i.wg)(),(0,i.iD)("img",H)):(0,i.kq)("",!0),2===this.oscWaveIndex?((0,i.wg)(),(0,i.iD)("img",q)):(0,i.kq)("",!0),3===this.oscWaveIndex?((0,i.wg)(),(0,i.iD)("img",S)):(0,i.kq)("",!0)],4)])],4),(0,i._)("div",{class:"chain_buttons",style:(0,g.j5)(r.chain_buttons)},[K,(0,i._)("div",{class:"button_1",style:(0,g.j5)(r.button_1),onClick:t[23]||(t[23]=function(e){return l.onChainclick(0)})},null,4),(0,i._)("div",{class:"button_2",style:(0,g.j5)(r.button_2),onClick:t[24]||(t[24]=function(e){return l.onChainclick(1)})},null,4),(0,i._)("div",{class:"button_3",style:(0,g.j5)(r.button_3),onClick:t[25]||(t[25]=function(e){return l.onChainclick(2)})},null,4),G],4)])}var A=s(352),W=s(9914),X=s(3350),Y=s(546),Z=s(3087),B=s(9103),J=s(2262),Q=.5,ee=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16;(0,Z.Z)(this,e),this.destination=t,this.modulatorsData={envelope:{vol:{amount:1,parameters:{attack:1,decay:.3,sustain:.8,release:1}},mod:{amount:0,parameters:{attack:.05,decay:.1,sustain:1,release:.2}},pitch:{amount:0,parameters:{attack:.05,decay:.1,sustain:1,release:.2}}},lfo:{vol:{amount:0,parameters:{frequency:10,waveform:"sine",min:0,max:1}},mod:{amount:0,parameters:{frequency:10,waveform:"sine",min:0,max:1}},pitch:{amount:0,parameters:{frequency:10,waveform:"sine",min:0,max:1}}}},this.synthPreset={type:"",waveform:"sine",vol:-12,transpose:0,mod:0,partials:"",pan:""},this.dampNode=new m.S9(Q),this.gainNode=new m.S9(1),this.allVoices=[],this.freeVoices=[],this.busyVoices={},this.nVoices=s,this.lastNotes=Array(this.nVoices),this.initVoices(),this.gainNode.connect(this.dampNode),this.dampNode.connect(this.destination)}return(0,B.Z)(e,[{key:"initVoices",value:function(){for(var e=0;e<this.nVoices;e++){var t={envelope:{vol:{amount:1,signal:null,scale:null},mod:{amount:0,signal:null,scale:null},pitch:{amount:0,signal:null,scale:null}},lfo:{vol:{amount:0,signal:null,scale:null},mod:{amount:0,signal:null,scale:null},pitch:{amount:0,signal:null,scale:null}}},s=new m.S9;s.connect(this.gainNode);var n=new m.S9(1).connect(s),i=this.createSynth();i.oscillator.disconnect(),i.oscillator.connect(n),i.envelope.disconnect(),i.envelope.dispose();var o=new m.S9,a=new m.S9,r=new m.cy("pink");r.connect(a),a.connect(o),o.connect(this.dampNode);var l={synth:i,gain:n,lfoGain:s,modulators:t,noise:r,noiseGain:a,noiseAdsrGain:o};for(var c in t)for(var h in t[c]){var u=this.createModulator(c);t[c][h].signal=u,t[c][h].scale=this.createScale(h),this.connectModulator(t[c][h],c,h,l)}this.freeVoices.push(l),this.allVoices.push(l)}this.initialized=!1,this.updateModulators(),this.initialized=!0}},{key:"playNote",value:function(e,t){if(this.initialized){this.lastNotes.push(e),this.lastNotes.length>this.nVoices&&(this.lastNote=this.lastNotes.shift());var s=this.freeVoices.shift();for(var n in s||(s=this.busyVoices[this.lastNote],delete this.busyVoices[this.lastNote]),this.busyVoices[e]=s,s.modulators)for(var i in s.modulators[n])if(s.modulators[n][i].amount>0)switch(n){case"envelope":(0,J.IU)(s.modulators[n][i].signal).cancel(m.zO()),(0,J.IU)(s.modulators[n][i].signal).triggerAttack(m.zO());break;case"lfo":(0,J.IU)(s.modulators[n][i]).signal.stop(),(0,J.IU)(s.modulators[n][i]).signal.start();break;default:break}s.synth.oscillator.stop(m.zO()),s.synth.envelope.cancel(m.zO()),s.noise.start(),s.synth.triggerAttack(e,m.zO(),t/128)}}},{key:"stopNote",value:function(e){if(this.initialized&&this.busyVoices[e]){var t=this.busyVoices[e];for(var s in delete this.busyVoices[e],this.freeVoices.push(t),t.modulators)for(var n in t.modulators[s])if(t.modulators[s][n].signal)switch(s){case"envelope":t.modulators[s][n].signal.triggerRelease(m.zO());break;case"lfo":break;default:break}}}},{key:"createSynth",value:function(){var e=this,t=new m.WV;return(0,i.Y3)((function(){t.set({volume:e.synthPreset.vol,detune:100*e.synthPreset.transpose,oscillator:{type:e.synthPreset.type+e.synthPreset.waveform+e.synthPreset.partials}})})),t}},{key:"createModulator",value:function(e){switch(e){case"envelope":return new m.wr;case"lfo":return new m.Fo;default:return console.log("Error creating modulator"),null}}},{key:"createScale",value:function(e){switch(e){case"vol":return new m.Ci(0,1);case"mod":return new m.Ci(0,1);case"pitch":return new m.Ci(0,1);case"pan":return new m.Ci(0,1);default:return console.log("Error creating scale for target "+e),null}}},{key:"updateModulators",value:function(){var e=this;this.allVoices.forEach((function(t){for(var s in t.modulators)for(var n in t.modulators[s])t.modulators[s][n].amount=e.modulatorsData[s][n].amount,(0,J.IU)(t.modulators[s][n].signal)||(t.modulators[s][n].signal=e.createModulator(s),t.modulators[s][n].scale=e.createScale(n),e.connectModulator((0,J.IU)(t.modulators[s][n]),s,n,(0,J.IU)(t))),e.scaleSetter(t.modulators[s][n],n),e.modulatorSetter((0,J.IU)(t.modulators[s][n].signal),s,e.modulatorsData[s][n].parameters)}))}},{key:"updateSynths",value:function(){var e=this;this.allVoices.forEach((function(t){t.synth.set({detune:100*e.synthPreset.transpose,oscillator:{type:e.synthPreset.type+e.synthPreset.waveform+e.synthPreset.partials}}),t.noiseGain.set({gain:e.synthPreset.mod})}))}},{key:"scaleSetter",value:function(e,t){switch(t){case"vol":(0,J.IU)(e.scale).set({min:Math.max(m.xz(this.synthPreset.vol)-e.amount,0),max:Math.min(m.xz(this.synthPreset.vol)+e.amount,1)});break;case"mod":(0,J.IU)(e.scale).set({min:Math.max(this.synthPreset.mod-e.amount,0),max:Math.min(this.synthPreset.mod+e.amount,1)});break;case"pitch":(0,J.IU)(e.scale).set({min:100*(this.synthPreset.transpose-24*e.amount),max:100*(this.synthPreset.transpose+24*e.amount)});break;case"pan":break;default:console.log("invalid target to connect modulator to");break}}},{key:"modulatorSetter",value:function(e,t,s){switch((0,J.IU)(s).waveform||((0,J.IU)(s).waveform=e.type),t){case"envelope":e.set({attack:s.attack,decay:s.decay,sustain:s.sustain,release:s.release+.001});break;case"lfo":e.set({type:(0,J.IU)(s).waveform,frequency:(0,J.IU)(s).frequency});break;default:console.log("Error setting modulator parameters, invalid args");break}}},{key:"connectModulator",value:function(e,t,s,n){switch(t){case"envelope":switch(s){case"vol":e.signal.chain(e.scale,n.gain.gain),e.signal.connect(n.noiseAdsrGain.gain);break;case"mod":e.signal.chain(e.scale,n.noiseGain.gain);break;case"pitch":this.scaleSetter(e,s),e.signal.chain(e.scale,n.synth.detune);break;case"pan":break;default:console.log("invalid target to connect modulator to");break}break;case"lfo":switch(s){case"vol":this.scaleSetter(e,s),e.signal.chain(e.scale,n.lfoGain.gain);break;case"mod":e.signal.chain(e.scale,n.noiseGain.gain);break;case"pitch":this.scaleSetter(e,s),e.signal.chain(e.scale,n.synth.detune);break;case"pan":break;default:console.log("invalid target to connect modulator to");break}break;default:console.log("invalid modulator type");break}}},{key:"setModulatorParameters",value:function(e,t,s){this.initialized&&(this.modulatorsData[e][t].parameters=s,this.updateModulators())}},{key:"setModulatorAmount",value:function(e,t,s){this.initialized&&(this.modulatorsData[e][t].amount=s,this.updateModulators())}},{key:"setParameters",value:function(e){var t=e.volume,s=void 0===t?this.synthPreset.vol:t,n=e.modulation,i=void 0===n?this.synthPreset.mod:n,o=e.transpose,a=void 0===o?this.synthPreset.transpose:o,r=e.pan,l=void 0===r?this.synthPreset.pan:r,c=e.type,h=void 0===c?this.synthPreset.type:c,u=e.waveform,d=void 0===u?this.synthPreset.waveform:u;this.initialized?(this.synthPreset.vol=s,this.synthPreset.mod=i,this.synthPreset.transpose=a,this.synthPreset.pan=l,this.synthPreset.type=h,this.synthPreset.waveform=d,this.updateSynths(),this.updateModulators()):console.log("Polysynth not initialized")}},{key:"connect",value:function(e){this.gainNode.connect(e)}},{key:"disconnectDispose",value:function(){this.allVoices.forEach((function(e){for(var t in e=(0,J.IU)(e),e.synth.disconnect(),e.synth.dispose(),e.gain.disconnect(),e.gain.dispose(),e.modulators)for(var s in e.modulators[t])e.modulators[t][s].signal&&(e.modulators[t][s].signal.disconnect(),e.modulators[t][s].signal.dispose(),e.modulators[t][s].scale.disconnect(),e.modulators[t][s].scale.dispose())})),this.gainNode.disconnect(),this.gainNode.dispose()}}]),e}(),te=["sine","triangle","sawtooth","square"],se=["","fm","am","fat"];const ne={components:{SineIcon:A.Z,SquareIcon:W.Z,TriangleIcon:X.Z,SawtoothIcon:Y.Z},data:function(){return{color:{vol:this.colors.pink,mod:this.colors.azure,pitch:this.colors.green},osc_types:["std","fm","am","fat"],volume:.5,modulation:1,pitch:0,pan:0,attack:.01,decay:.1,sustain:1,release:.2,maxPitch:24,minPitch:-24,partials:"",oscWaveIndex:0,oscTypeIndex:0,waveform_btn_style:"lightblue",wave_icon_size:32,is_modulationDown:!1,is_volumeDown:!1,is_pitchDown:!1,isFilterChainRouteActive:[!0,!1,!1],modulators:{vol:null,mod:null,pitch:null}}},props:["id"],mounted:function(){document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp),window.addEventListener("resize",this.resizeGraphics),this.resizeGraphics(),this.gainNode=new m.S9,this.synth=new ee(this.gainNode,this.polyphonyVoices),this.synth.setParameters({volume:(0,m.H2)(1-this.volume)}),this.synths.list.push(this.synth),this.id>1&&this.initConnections(),this.$emit("newOsc")},computed:{osc_container:function(){return{background:"#f8e7e6"}},type_button:function(){return{fontSize:".5vw",background:this.colors.pink.glow}},type_text:function(){return{color:this.colors.gray.dark}},volume_area:function(){return{background:this.colors.pink.dark}},mod_area:function(){return{background:this.colors.azure.medium}},pitch_area:function(){return{background:this.colors.green.glow}},mod_slider:function(){return{transform:"rotate(-"+111*this.modulation+"deg)",background:"white",opacity:"60%"}},volume_slider:function(){return{backgroundColor:"white",opacity:"60%",transform:"rotate("+112*this.volume+"deg)"}},pitch_slider:function(){return{background:this.colors.green.medium}},pitch_hand:function(){return{transform:"rotate("+50*this.pitch/this.maxPitch+"deg)",borderLeft:".1vw solid "+this.colors.green.dark}},osc_wave:function(){return{border:".1vw solid "+this.colors.green.dark,background:this.colors.green.glow}},lineL:function(){return{transform:"rotate(66deg)",borderLeft:".1vw solid "+this.colors.green.dark}},lineU:function(){return{transform:"rotate(-66deg)",borderLeft:".1vw solid "+this.colors.green.dark}},lineR:function(){return{transform:"rotate(180deg)",borderLeft:".1vw solid "+this.colors.green.dark}},chain_buttons:function(){return{background:this.colors.pink.glow}},button_1:function(){var e="";return e=this.isFilterChainRouteActive[0]?this.colors.purple.light:this.colors.pink.glow,{background:e,border:".1vw solid "+this.colors.gray.dark}},button_2:function(){var e="";return e=this.isFilterChainRouteActive[1]?this.colors.green.medium:this.colors.pink.glow,{background:e,border:".1vw solid "+this.colors.gray.dark}},button_3:function(){var e="";return e=this.isFilterChainRouteActive[2]?this.colors.pink.light:this.colors.pink.glow,{background:e,border:".1vw solid "+this.colors.gray.dark}}},methods:{handleDrop:function(e,t){if(null===this.modulators[t]){var s=JSON.parse(e.dataTransfer.getData("data"));"vol"===t&&"envelope"===s.type||(this.modulators[t]={color:s.color,id:s.id,type:s.type},document.dispatchEvent(new CustomEvent("link",{detail:{object:this.synth,target:t,color:this.color[t]["medium"],modulator:{type:this.modulators[t].type,id:this.modulators[t].id}}})))}},handleDragEnter:function(e){},handleDragLeave:function(e){},unlinkMod:function(e){document.dispatchEvent(new CustomEvent("unLink",{detail:{object:this.synth,target:e,modulator:{type:this.modulators[e].type,id:this.modulators[e].id}}})),this.modulators[e]=null},computedModulation:function(e){switch(e){case"vol":return this.modulators[e]?{width:"1vw",height:"1vw",borderRadius:"50%",backgroundColor:this.modulators[e].color,position:"absolute",right:"0%"}:{display:"none",width:"0%",height:"0%"};case"mod":return this.modulators[e]?{width:"1vw",height:"1vw",borderRadius:"50%",backgroundColor:this.modulators[e].color,position:"absolute"}:{display:"none",width:"0%",height:"0%"};case"pitch":return this.modulators[e]?{width:"1vw",height:"1vw",borderRadius:"50%",backgroundColor:this.modulators[e].color,position:"absolute",left:"0%",bottom:"0%"}:{display:"none",width:"0%",height:"0%"}}},computedModText:function(e){return this.modulators[e]?this.modulators[e].id:""},dispose:function(){for(var e in this.modulators)this.modulators[e]&&this.unlinkMod(e);this.$emit("disposed",this.id),this.synth.disconnectDispose(),this.synths.list.splice(this.synths.list.indexOf(this.synth),1)},initConnections:function(){this.gainNode.connect(this.filterChains[0][0].getToneFilter())},resizeGraphics:function(){var e=document.body.clientWidth;this.wave_icon_size=e>=500?32*e/1500:0},onChainclick:function(e){try{this.isFilterChainRouteActive[e]?this.gainNode.disconnect(this.filterChains[e][0].getToneFilter()):this.gainNode.connect(this.filterChains[e][0].getToneFilter())}catch(t){console.log("error: "+t+"\nCHAIN CONNECTION TO OSC UNSUCCESSFUL. Can't connect to "+this.filterChains[e][0])}this.isFilterChainRouteActive[e]=!this.isFilterChainRouteActive[e]},onMouseMove:function(e){this.is_volumeDown?(e.movementY<0?this.volume=Math.max(this.volume+e.movementY/100,0):this.volume=Math.min(this.volume+e.movementY/100,1),this.synth.setParameters({volume:(0,m.H2)(1-this.volume)})):this.is_modulationDown?(e.movementY<0?this.modulation=Math.max(this.modulation+e.movementY/100,0):this.modulation=Math.min(this.modulation+e.movementY/100,1),this.synth.setParameters({modulation:1-this.modulation})):this.is_pitchDown&&(e.movementX<0?this.pitch=Math.min(this.pitch-Math.floor(e.movementX),this.maxPitch):e.movementX>0&&(this.pitch=Math.max(this.pitch-Math.floor(e.movementX),this.minPitch)),this.synth.setParameters({transpose:this.pitch}))},onMouseUp:function(e){this.is_modulationDown&&(this.is_modulationDown=!1),this.is_volumeDown&&(this.is_volumeDown=!1),this.is_pitchDown&&(this.is_pitchDown=!1)},modulationDown:function(e){this.is_modulationDown||(this.is_modulationDown=!0)},volumeDown:function(e){this.is_volumeDown||(this.is_volumeDown=!0)},pitchDown:function(e){this.is_pitchDown||(this.is_pitchDown=!0)},nextOscType:function(){this.oscTypeIndex++,this.oscTypeIndex>=se.length&&(this.oscTypeIndex=0),this.synth.setParameters({type:se[this.oscTypeIndex]})},nextWaveform:function(){this.oscWaveIndex++,this.oscWaveIndex>=te.length&&(this.oscWaveIndex=0),this.synth.setParameters({waveform:te[this.oscWaveIndex]})},connect:function(e){this.synth.connect(e)}},unmounted:function(){window.removeEventListener("resize",this.resizeGraphics),document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("mouseup",this.onMouseUp)}},ie=(0,r.Z)(ne,[["render",V],["__scopeId","data-v-53f63126"]]),oe=ie,ae={components:{Osc:oe},data:function(){return{oscList:[],name:"oscHost",i:0}},mounted:function(){this.addOsc(),this.addOsc()},methods:{handleNewOsc:function(){this.$emit("newOsc")},initConnections:function(){for(var e in this.$refs)(0,J.IU)(this.$refs[e][0]).initConnections()},addOsc:function(){var e="osc"+this.i;this.oscList.push({id:this.i,ref:e}),this.i+=1},removeOsc:function(e){var t=this,s=0;this.oscList.forEach((function(n){n.id===e&&(s=t.oscList.indexOf(n))})),this.oscList.splice(s,1)}},unmounted:function(){},computed:{oscHost:function(){return{background:"#f8e7e6"}},voidBorder:function(){return{background:this.colors.pink.glow,border:".1vw solid"+this.colors.pink.dark}}}},re=(0,r.Z)(ae,[["render",C],["__scopeId","data-v-744778da"]]),le=re;function ce(e,t,s,n,o,a){var r=(0,i.up)("FilterChain");return(0,i.wg)(),(0,i.iD)("div",{class:"filterHost",style:(0,g.j5)(this.filterHost)},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(this.chainList,(function(e){return(0,i.wg)(),(0,i.j4)(r,{key:e.id,ref_for:!0,ref:e.ref,id:e.id,color:e.color,onFilterInitialized:t[0]||(t[0]=function(e){return a.initConnections()})},null,8,["id","color"])})),128))],4)}var he=function(e){return(0,i.dD)("data-v-c7cd25ac"),e=e(),(0,i.Cn)(),e},ue={class:"filterChain"},de={class:"chainHead",ref:"chainHead"},fe={class:"chainTail"},pe=he((function(){return(0,i._)("div",null,null,-1)})),ve=he((function(){return(0,i._)("div",null,null,-1)}));function me(e,t,s,n,o,a){var r=this,l=(0,i.up)("Filter");return(0,i.wg)(),(0,i.iD)("div",ue,[(0,i._)("div",{class:"chainline",style:(0,g.j5)(this.chainLine)},null,4),(0,i._)("div",{class:"chainDot",style:(0,g.j5)(this.chainDot)},null,4),(0,i._)("div",de,null,512),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(this.filterList,(function(e){return(0,i.wg)(),(0,i.j4)(l,{key:e.id,ref_for:!0,ref:e.ref,chainId:r.id,id:e.id,filter_type:e.type,chainColor:r.color,onFiltersMounted:t[0]||(t[0]=function(e){return r.handleFiltersMounted()})},null,8,["chainId","id","filter_type","chainColor"])})),128)),(0,i._)("div",fe,[pe,(0,i._)("div",{class:"routing-btn fx_chain_1",style:(0,g.j5)(a.fx_chain_1),onClick:t[1]||(t[1]=function(e){return a.setRouting(0)})},null,4),(0,i._)("div",{class:"routing-btn fx_chain_2",style:(0,g.j5)(a.fx_chain_2),onClick:t[2]||(t[2]=function(e){return a.setRouting(1)})},null,4),(0,i._)("div",{class:"routing-btn fx_chain_3",style:(0,g.j5)(a.fx_chain_3),onClick:t[3]||(t[3]=function(e){return a.setRouting(2)})},null,4),ve])])}s(6977);var ge={class:"filter"},ye=["textContent"],we={class:"filter_back",ref:"filter_back"},ke={key:0,class:"logo_text"},be={key:1,class:"logo_text"},_e={key:3,class:"logo_BD_back"};function De(e,t,s,o,a,r){return(0,i.wg)(),(0,i.iD)("div",ge,[(0,i._)("div",{class:"modDot",style:(0,g.j5)(r.computedModulation("filter")),onClick:t[0]||(t[0]=(0,n.iM)((function(e){return r.unlinkMod("filter")}),["shift","stop"])),textContent:(0,g.zw)(r.computedModText("filter"))},null,12,ye),(0,i._)("div",we,null,512),(0,i._)("div",{class:"filter_logo",style:(0,g.j5)(this.filter_logo),onMousedown:t[6]||(t[6]=function(){return r.logoDown&&r.logoDown.apply(r,arguments)})},[a.is_logoDown&&"peaking"!=a.type?((0,i.wg)(),(0,i.iD)("div",ke,(0,g.zw)((100*(1-this.resonance)).toFixed()+"%"),1)):(0,i.kq)("",!0),a.is_logoDown&&"peaking"==a.type?((0,i.wg)(),(0,i.iD)("div",be,(0,g.zw)((100*(1-2*this.resonance)).toFixed()+"%"),1)):(0,i.kq)("",!0),(0,i._)("div",{class:"logo_glow",style:(0,g.j5)(r.computedGlow)},null,4),(0,i._)("div",{class:"logo_border",onDragenter:[t[1]||(t[1]=function(e){return r.handleDragEnter("filter")}),t[3]||(t[3]=(0,n.iM)((function(){}),["prevent"]))],onDragleave:t[2]||(t[2]=function(e){return r.handleDragLeave("filter")}),onDragover:t[4]||(t[4]=(0,n.iM)((function(){}),["prevent"])),onDrop:t[5]||(t[5]=function(e){return r.handleDrop(e,"filter")})},null,32),(0,i._)("div",{class:"logo",style:(0,g.j5)(r.logo)},[a.is_logoDown?((0,i.wg)(),(0,i.iD)("div",{key:0,class:"logo_text_back",style:(0,g.j5)(this.logo_text_back)},null,4)):(0,i.kq)("",!0),"lowpass"===a.type?((0,i.wg)(),(0,i.iD)("div",{key:1,class:"logo_LP",style:(0,g.j5)(r.computedLP)},null,4)):(0,i.kq)("",!0),"highpass"===a.type?((0,i.wg)(),(0,i.iD)("div",{key:2,class:"logo_HP",style:(0,g.j5)(r.computedHP)},null,4)):(0,i.kq)("",!0),"peaking"===a.type?((0,i.wg)(),(0,i.iD)("div",_e)):(0,i.kq)("",!0),"peaking"===a.type?((0,i.wg)(),(0,i.iD)("div",{key:4,class:"logo_BD_circle",style:(0,g.j5)(r.computedBDCircle)},null,4)):(0,i.kq)("",!0)],4)],36)])}s(7327),s(658);var Me=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"peaking",s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5;(0,Z.Z)(this,e),this.filter_type=t,this.cutoff=s,this.resonance=n,this.modulatorsData={envelope:{amount:0,parameters:{attack:1,decay:.3,sustain:.8,release:1}},lfo:{amount:0,parameters:{frequency:10,waveform:"sine",min:0,max:1}}},this.activeNotes=0,this.modulators={envelope:{signal:this.createModulator("envelope"),scale:new m.db(0,1,3),amount:0},lfo:{signal:this.createModulator("lfo"),scale:new m.db(0,1,3),amount:0}},this.filter=new m.wn,this.initFilterParams()}return(0,B.Z)(e,[{key:"getCutoff",value:function(){return this.cutoff}},{key:"getResonance",value:function(){return this.resonance}},{key:"createModulator",value:function(e){switch(e){case"envelope":return new m.wr;case"lfo":return new m.Fo;default:return console.log("Error creating modulator"),null}}},{key:"initFilterParams",value:function(){var e=this;switch(this.filter_type){case"lowpass":this.cutoff=.9,this.resonance=1;break;case"highpass":this.cutoff=.1,this.resonance=1;break;case"peaking":this.cutoff=.5,this.resonance=.5;break;case"bandpass":break;case"lowshelf":break;case"highshelf":break;case"notch":break;case"allpass":break;default:console.log("Invalid filter type")}this.filter.set({frequency:e.cutoffLogMapping(this.cutoff),type:this.filter_type}),this.scaleSetter(this.modulators.envelope),this.scaleSetter(this.modulators.lfo),this.connectModulator(this.modulators.envelope),this.connectModulator(this.modulators.lfo),this.updateModulators()}},{key:"scaleSetter",value:function(e){(0,J.IU)(e.scale).set({min:Math.pow(10,Math.log10(this.cutoffLogMapping(this.cutoff))-1*e.amount),max:Math.pow(10,Math.log10(this.cutoffLogMapping(this.cutoff))+1*e.amount)})}},{key:"connectModulator",value:function(e){e.signal.chain(e.scale,this.filter.frequency)}},{key:"setModulatorParameters",value:function(e,t,s){this.modulatorsData[e].parameters=s,this.updateModulators()}},{key:"setModulatorAmount",value:function(e,t,s){this.modulatorsData[e].amount=s,this.updateModulators()}},{key:"updateModulators",value:function(){for(var e in this.modulators)this.modulators[e].amount=this.modulatorsData[e].amount,this.scaleSetter(this.modulators[e]),this.modulatorSetter((0,J.IU)(this.modulators[e].signal),e,this.modulatorsData[e].parameters)}},{key:"modulatorSetter",value:function(e,t,s){switch((0,J.IU)(s).waveform||((0,J.IU)(s).waveform=e.type),t){case"envelope":e.set({attack:s.attack,decay:s.decay,sustain:s.sustain,release:s.release+.001});break;case"lfo":e.set({type:(0,J.IU)(s).waveform,frequency:(0,J.IU)(s).frequency});break;default:console.log("Error setting modulator parameters, invalid args");break}}},{key:"playNote",value:function(){this.modulators.envelope.signal.cancel(m.zO()),this.modulators.envelope.signal.triggerAttack(m.zO()),this.modulators.lfo.signal.stop(),this.modulators.lfo.signal.start(),this.activeNotes++}},{key:"stopNote",value:function(){this.activeNotes<=1&&this.modulators.envelope.signal.triggerRelease(m.zO()),this.activeNotes--}},{key:"setCutoff",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.cutoff;this.cutoff=e;var t=this;this.filter.set({frequency:t.cutoffLogMapping(this.cutoff)}),this.updateModulators()}},{key:"setResonance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.resonance;this.resonance=e;var t=this;"lowshelf"===this.filter_type||"highshelf"===this.filter_type||"peaking"===this.filter_type?this.filter.set({gain:t.resonanceRangeNormalizer(1-t.resonance,this.filter_type)}):"lowpass"!==this.filter_type&&"highpass"!==this.filter_type||this.filter.set({Q:t.resonanceRangeNormalizer(1-t.resonance,this.filter_type)})}},{key:"connect",value:function(e){try{this.filter.connect(e)}catch(t){console.log("ERROR: "+t+" - myfilter: ",this.filter," -connect to destination: ",e)}}},{key:"disconnect",value:function(e){this.filter.disconnect(e)}},{key:"getToneFilter",value:function(){return this.filter}},{key:"cutoffLogMapping",value:function(e){if(!(e<0||e>1))return 20*Math.pow(10,Math.log10(1100)*e);console.error("Input value must be between 0 and 1.")}},{key:"resonanceRangeNormalizer",value:function(e,t){if(e<0||e>1)console.error("Input value must be between 0 and 1.");else switch(t){case"lowpass":return 15*e;case"highpass":return 15*e;case"peaking":return 30*(e-.5);default:break}}}]),e}();const xe={props:["filter_type","chainId","chainColor","id"],data:function(){return{color:this.colors.yellow,type:this.filter_type,cutoff:.5,resonance:.5,is_logoDown:!1,modulator:null}},mounted:function(){document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp),this.filter=new Me(this.type,this.cutoff,this.resonance),this.cutoff=this.filter.getCutoff(),this.resonance=this.filter.getResonance(),this.filterChains[this.chainId][this.id]=this.filter,this.id===this.nFiltersXchain-1&&this.chainId===this.nFilterChains-1&&this.$emit("filtersMounted")},methods:{handleDrop:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(null===this.modulator){var s=JSON.parse(e.dataTransfer.getData("data"));this.modulator={color:s.color,id:s.id,type:s.type},document.dispatchEvent(new CustomEvent("link",{detail:{object:this.filter,target:t,color:this.color["light"],modulator:{type:this.modulator.type,id:this.modulator.id}}}))}},handleDragEnter:function(e){},handleDragLeave:function(e){},unlinkMod:function(e){document.dispatchEvent(new CustomEvent("unLink",{detail:{object:this.filter,target:e,modulator:{type:this.modulator.type,id:this.modulator.id}}})),this.modulator=null},computedModulation:function(){return this.modulator?{width:"1vw",height:"1vw",borderRadius:"50%",backgroundColor:this.modulator.color,position:"absolute",left:"10%",zIndex:"1",top:"10%"}:{display:"none",width:"0%",height:"0%"}},computedModText:function(){return this.modulator?this.modulator.id:""},onMouseMove:function(e){this.is_logoDown&&(e.movementY<0?this.resonance=Math.max(this.resonance+e.movementY/100,0):this.resonance=Math.min(this.resonance+e.movementY/100,1),e.movementX<0?this.cutoff=Math.max(this.cutoff+Math.floor(e.movementX)/100,0):e.movementX>0&&(this.cutoff=Math.min(this.cutoff+Math.floor(e.movementX)/100,1)),this.filter.setResonance(this.resonance),this.filter.setCutoff(this.cutoff))},onMouseUp:function(){this.is_logoDown&&(this.is_logoDown=!1),document.body.style.cursor="pointer"},logoDown:function(){this.is_logoDown||(this.is_logoDown=!0,document.body.style.cursor="none")},setCutoff:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.cutoff;this.cutoff=e,this.filter.setCutoff(this.cutoff)},setResonance:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.resonance;this.resonance=e,this.filter.setResonance(this.resonance)},connect:function(e){this.filter.connect(e)},disconnect:function(e){this.filter.disconnect(e)},getToneFilter:function(){return this.filter.getToneFilter()},getMyFilter:function(){return this.filter}},computed:{computedHeadStyle:function(){return{left:.7*this.cutoff*100+13.5+"%"}},computedGlow:function(){return"peaking"===this.filter_type&&this.resonance<.5?{opacity:1-2*this.resonance,background:this.colors.yellow.light}:"peaking"===this.filter_type&&this.resonance>=.5?{opacity:2*this.resonance-1,background:this.colors.yellow.light}:{opacity:1-this.resonance,background:this.colors.yellow.light}},computedLP:function(){return{transform:"translateX("+(100*this.cutoff-100)+"%)"}},computedHP:function(){return{transform:"translateX("+100*this.cutoff+"%)"}},computedBDMaks:function(){var e="";return e=this.resonance>.5?"polygon(0% 0%, 100% 0%, 100% 50%, 0% 50%)":this.resonance<.5?"polygon(0% 50%, 0% 100%, 100% 100%, 100% 50%)":"polygon(0% 0%, 100% 0%, 100% 50%, 0% 50%)",{clipPath:e}},computedBD:function(){return 1-this.resonance>=.5?{height:100*(1-this.resonance)+"%",transform:"translateX("+100*this.cutoff+"%)"}:{height:100*(1-this.resonance-.5)+"%",transform:"translateX("+100*(this.cutoff-.5)+"%)"}},computedBDCircle:function(){return{transform:"translate("+100*(this.cutoff-.5)+"%, "+100*(this.resonance-.5)+"%)"}},filter_logo:function(){return{background:this.colors.yellow.glow}},logo:function(){return{background:this.colors.yellow.light}},logo_text_back:function(){return{background:this.colors.yellow.light}}}},Ce=(0,r.Z)(xe,[["render",De],["__scopeId","data-v-35e63e5b"]]),Ie=Ce;var Le=["highpass","peaking","lowpass"];const Fe={ref:"FilterChain",components:{Filter:Ie},props:["color","id"],data:function(){return{filterList:[],nFilters:3,isFxChainRouteActive:[!0,!1,!1]}},mounted:function(){for(var e=0;e<this.nFiltersXchain;e++)this.filterList.push({id:e,ref:"filter"+e,type:Le[e]})},computed:{fx_chain_1:function(){var e="";return e=this.isFxChainRouteActive[0]?this.colors.purple.light:this.colors.yellow.glow,{background:e,border:".1vw solid"+this.colors.gray.dark}},fx_chain_2:function(){var e="";return e=this.isFxChainRouteActive[1]?this.colors.green.medium:this.colors.yellow.glow,{background:e,border:".1vw solid"+this.colors.gray.dark}},fx_chain_3:function(){var e="";return e=this.isFxChainRouteActive[2]?this.colors.pink.light:this.colors.yellow.glow,{background:e,border:".1vw solid"+this.colors.gray.dark}},chainLine:function(){return{top:"49%",left:"5%",width:"88%",height:".2vw",position:"absolute",background:this.$props["color"],zIndex:"0",borderRadius:"10%"}},chainDot:function(){return{top:"45%",left:"3.5%",height:"10%",aspectRatio:"1/1",position:"absolute",zIndex:"3",background:this.$props["color"],borderRadius:"50%"}}},methods:{handleFiltersMounted:function(){this.id===this.nFilterChains-1&&this.$emit("filterInitialized")},initConnections:function(){for(var e=0;e<this.nFiltersXchain-1;e++)this.filterChains[this.id][e].connect(this.filterChains[this.id][e+1].getToneFilter());this.filterChains[this.id][this.nFilters-1].connect(this.fxChains[0][0]),this.isFxChainRouteActive[0]=!0},setRouting:function(e){try{this.isFxChainRouteActive[e]?this.filterChains[this.id][this.nFilters-1].disconnect(this.fxChains[e][0]):this.filterChains[this.id][this.nFilters-1].connect(this.fxChains[e][0])}catch(t){console.log("error: "+t+"\nCHAIN FILTERS CONNECTION TO FX CHAIN "+e+" UNSUCCESSFUL. Can't connect to "+this.fxChains[e][0])}this.isFxChainRouteActive[e]=!this.isFxChainRouteActive[e]}}},Ue=(0,r.Z)(Fe,[["render",me],["__scopeId","data-v-c7cd25ac"]]),je=Ue,$e={name:"FilterHost",components:{FilterChain:je},data:function(){return{chain_colors:[],chainList:[],nFilterChains:3}},mounted:function(){this.chain_colors=[this.colors.purple.medium,this.colors.green.medium,this.colors.pink.medium];for(var e=0;e<this.nFilterChains;e++)this.chainList.push({id:e,ref:"chain"+e,color:this.chain_colors[e]})},computed:{filterHost:function(){return{background:this.colors.yellow.glow}}},methods:{initConnections:function(){for(var e in this.$refs)(0,J.IU)(this.$refs[e][0]).initConnections();this.$emit("filterInitialized")}}},Pe=(0,r.Z)($e,[["render",ce],["__scopeId","data-v-2c1963ee"]]),Oe=Pe;var ze={class:"chainHeadsRow"},Ne={class:"fxGrid"};function Ee(e,t,s,n,o,a){var r=this,l=(0,i.up)("FxCell");return(0,i.wg)(),(0,i.iD)("div",{style:(0,g.j5)(this.fxBack)},[(0,i._)("div",{class:"fxHost",style:(0,g.j5)(this.fxHost)},[(0,i._)("div",ze,[(0,i._)("div",{class:"chainHead",style:(0,g.j5)(this.chainHead1)},null,4),(0,i._)("div",{class:"chainHead",style:(0,g.j5)(this.chainHead2)},null,4),(0,i._)("div",{class:"chainHead",style:(0,g.j5)(this.chainHead3)},null,4)]),(0,i._)("div",Ne,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.Fx_chain1,(function(e){return(0,i.wg)(),(0,i.j4)(l,{ref_for:!0,ref:"effects",chainId:e.chainId,id:e.id,item:e},null,8,["chainId","id","item"])})),256)),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.Fx_chain2,(function(e){return(0,i.wg)(),(0,i.j4)(l,{chainId:e.chainId,id:e.id,item:e},null,8,["chainId","id","item"])})),256)),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.Fx_chain3,(function(e){return(0,i.wg)(),(0,i.j4)(l,{chainId:e.chainId,id:e.id,item:e,onFxMounted:t[0]||(t[0]=function(e){return r.initFxConnections()})},null,8,["chainId","id","item"])})),256))]),(0,i._)("div",{class:"gainList",style:(0,g.j5)(this.gainList)},[(0,i._)("div",{id:"gain1",class:"channelGain",style:(0,g.j5)(a.channelGain(0)),onMousedown:t[1]||(t[1]=function(e){return a.gainMouseDown(0)})},[(0,i._)("div",{class:"channelGainFader",style:(0,g.j5)(a.computedFxGainKnobStyle(0))},null,4)],36),(0,i._)("div",{id:"gain2",class:"channelGain",style:(0,g.j5)(a.channelGain(1)),onMousedown:t[2]||(t[2]=function(e){return a.gainMouseDown(1)})},[(0,i._)("div",{class:"channelGainFader",style:(0,g.j5)(a.computedFxGainKnobStyle(1))},null,4)],36),(0,i._)("div",{id:"gain3",class:"channelGain",style:(0,g.j5)(a.channelGain(2)),onMousedown:t[3]||(t[3]=function(e){return a.gainMouseDown(2)})},[(0,i._)("div",{class:"channelGainFader",style:(0,g.j5)(a.computedFxGainKnobStyle(2))},null,4)],36)],4)],4)],4)}s(3290);const Te=s.p+"img/blizzard.23000ce3.svg",Re=s.p+"img/drop.7b7c4620.svg",He=s.p+"img/fire.b4dfdadb.svg",qe=s.p+"img/moon.30640c34.svg",Se=s.p+"img/wind.5ef8dfcc.svg",Ke=s.p+"img/tornado.ee5aa595.svg";var Ge={class:"icon"},Ve={key:1,src:Te,alt:""},Ae={key:2,src:Re,alt:""},We={key:3,src:He,alt:""},Xe={key:4,src:qe,alt:""},Ye={key:5,src:Se,alt:""},Ze={key:6,src:Ke,alt:""};function Be(e,t,s,o,a,r){var l=this;return(0,i.wg)(),(0,i.iD)("div",{class:"cell",onClick:[t[3]||(t[3]=function(){return r.nextFx&&r.nextFx.apply(r,arguments)}),t[4]||(t[4]=(0,n.iM)((function(){return r.setToBypass&&r.setToBypass.apply(r,arguments)}),["shift"]))],onMousedown:t[5]||(t[5]=function(){return r.fxDown&&r.fxDown.apply(r,arguments)})},[(0,i._)("div",Ge,[0===this.typeId?((0,i.wg)(),(0,i.iD)("div",{key:0,ref:"plus",style:(0,g.j5)(this.iconDiv),onMouseover:t[0]||(t[0]=function(){return l.onIconEnter&&l.onIconEnter.apply(l,arguments)}),onMouseout:t[1]||(t[1]=function(){return r.onIconLeave&&r.onIconLeave.apply(r,arguments)})}," +",36)):(0,i.kq)("",!0),1===this.typeId?((0,i.wg)(),(0,i.iD)("img",Ve)):(0,i.kq)("",!0),2===this.typeId?((0,i.wg)(),(0,i.iD)("img",Ae)):(0,i.kq)("",!0),3===this.typeId?((0,i.wg)(),(0,i.iD)("img",We)):(0,i.kq)("",!0),4===this.typeId?((0,i.wg)(),(0,i.iD)("img",Xe)):(0,i.kq)("",!0),5===this.typeId?((0,i.wg)(),(0,i.iD)("img",Ye)):(0,i.kq)("",!0),6===this.typeId?((0,i.wg)(),(0,i.iD)("img",Ze)):(0,i.kq)("",!0)]),(0,i._)("div",{class:"glow",style:(0,g.j5)(r.computedGlowStyle),onMousedown:t[2]||(t[2]=function(){return r.fxDown&&r.fxDown.apply(r,arguments)})},null,36)],32)}s(6647),s(3710),s(9714);var Je=function(){function e(t){var s=t.type,n=void 0===s?"none":s,i=t.modulation,o=void 0===i?0:i;(0,Z.Z)(this,e),this.type=n,this.mod=o,this.effect=this.generateToneFx(n)}return(0,B.Z)(e,[{key:"getToneReference",value:function(){return this.effect}},{key:"generateToneFx",value:function(e){var t;switch(e){case 0:case"none":t=new m.S9;break;case 1:case"reverb":t=this.createReverb();break;case 2:case"delay":t=this.createDelay();break;case 3:case"distortion":t=this.createDistortion();break;case 4:case"vibrato":t=this.createVibrato();break;case 5:case"pan":t=this.createPan();break;case 6:case"chorus":t=this.createChorus();break;default:t=new m.S9}return this.setFxParams({effect:t,type:e}),t}},{key:"setFxParams",value:function(e){var t=e.effect,s=void 0===t?this.effect:t,n=e.type,i=void 0===n?this.type:n,o=e.mod,a=void 0===o?this.mod:o;switch(this.effect=s,this.type=i,this.mod=a,i){case 1:case"reverb":this.effect.set({decay:.1+5*a,wet:.3+.7*a});break;case 2:case"delay":this.effect.set({delayTime:.05+.4*a,feedback:.05+.9*a,wet:.3+.7*a});break;case 3:case"distortion":this.effect.set({distortion:.05+.95*a,wet:.4+.6*a});break;case 4:case"vibrato":this.effect.set({depth:.5+.5*a,frequency:1+20*a,wet:.5+.5*a});break;case 5:case"pan":var r=2*a-1;this.effect.set({pan:r,wet:1}),console.log("pan coeff: "+r.toFixed(2));break;case 6:case"chorus":this.effect.set({depth:.6+.4*a,frequency:30+10*a,spread:80*a*8,wet:1,feedback:.05+.9*a,type:"triangle"+(10*a).toFixed(0).toString(),delayTime:100+90*a});break;default:this.effect=new m.S9}}},{key:"createReverb",value:function(){return new m.E8}},{key:"createDelay",value:function(){return new m.D0}},{key:"createDistortion",value:function(){return new m.df}},{key:"createVibrato",value:function(){return new m.Z7}},{key:"createPan",value:function(){return new m.fL}},{key:"createChorus",value:function(){return new m.bK}},{key:"connect",value:function(e){this.effect.connect(e)}},{key:"disconnect",value:function(){this.effect.disconnect()}},{key:"dispose",value:function(){this.effect.dispose()}}]),e}(),Qe=["none","reverb","delay","distortion","vibrato","pan","chorus"],et=["transparent","lightblue","deepskyblue","red","orange","darkorchid","yellow"];const tt={props:["chainId","id","ref"],data:function(){return{modulation:0,is_down:!1,typeId:0,volume:0,startX:0,startY:0,endX:0,endY:0,threshold:2}},mounted:function(){document.addEventListener("mouseup",this.onMouseup),document.addEventListener("mousemove",this.onMousemove),this.effect=new Je({typeId:Qe[this.typeId],modulation:this.modulation}),this.fxChains[this.chainId][this.id]=this.effect,this.chainId===this.nFxChains-1&&this.id===this.nFxXchain&&this.$emit("fxMounted")},computed:{computedGlowStyle:function(){return{opacity:100*(this.modulation+.3)+"%",background:et[this.typeId]}},iconDiv:function(){var e="black";return 0===this.chainId&&(e=this.colors.purple.medium),1===this.chainId&&(e=this.colors.green.medium),2===this.chainId&&(e=this.colors.pink.medium),{color:e}},iconDivBlack:function(){var e="black";return{color:e}},onIconEnter:function(){this.$refs["plus"].style.color="black"},onIconLeave:function(){var e="black";0===this.chainId&&(e=this.colors.purple.medium),1===this.chainId&&(e=this.colors.green.medium),2===this.chainId&&(e=this.colors.pink.medium),this.$refs["plus"].style.color=e}},components:{isSVGTag:g.aN},methods:{nextFx:function(){var e=Math.sqrt(Math.pow(this.endX-this.startX,2)+Math.pow(this.endY-this.startY,2));if(e<=this.threshold&&!this.is_down){this.typeId=this.generateNextTypeIndex();var t=Qe[this.typeId];this.changeFxType(t)}},changeFxType:function(e){this.effect.disconnect(),this.effect.dispose(),this.effect=new Je({type:e,modulation:this.modulation}),this.effect.setFxParams({type:e,mod:this.modulation}),this.fxChains[this.chainId][this.id]=this.effect,this.fxChains[this.chainId][this.id-1].connect(this.fxChains[this.chainId][this.id].getToneReference()),this.fxChains[this.chainId][this.id+1]instanceof Je?this.fxChains[this.chainId][this.id].connect(this.fxChains[this.chainId][this.id+1].getToneReference()):this.fxChains[this.chainId][this.id+1]instanceof m.S9&&this.fxChains[this.chainId][this.id].connect(this.fxChains[this.chainId][this.id+1])},generateRandomTypeIndex:function(){return Math.round(10*Math.random()+1)%Qe.length},generateNextTypeIndex:function(){return(this.typeId+1)%Qe.length},setToBypass:function(){this.typeId=0,this.changeFxType("none")},fxDown:function(e){this.startX=e.clientX,this.startY=e.clientY,this.is_down||(this.is_down=!0)},onMouseup:function(e){this.endX=e.clientX,this.endY=e.clientY,this.is_down&&(this.is_down=!1)},onMousemove:function(e){this.is_down&&(e.movementY<0?this.modulation=Math.min(this.modulation-e.movementY/100,1):this.modulation=Math.max(this.modulation-e.movementY/100,0),this.effect.setFxParams({fx:this.effect,typeId:this.typeId,mod:this.modulation}))}}},st=(0,r.Z)(tt,[["render",Be],["__scopeId","data-v-04d29db5"]]),nt=st,it={name:"FxHost",components:{FxCell:nt},data:function(){return{Fx_chain1:[],Fx_chain2:[],Fx_chain3:[],isGainSelected:"",chainsGains:""}},mounted:function(){this.isGainSelected=Array(this.nFxChains).fill(!1),this.chainsGains=Array(this.nFxChains).fill(0),this.chainsGains[0]=.8,this.chainsGains[1]=.8,this.chainsGains[2]=.8;for(var e=1;e<=this.nFxXchain;e++)this.Fx_chain1.push({id:e,ref:"Fx"+e,chainId:0}),this.Fx_chain2.push({id:e,ref:"Fx"+e+this.nFxXchain,chainId:1}),this.Fx_chain3.push({id:e,ref:"Fx"+e+2*this.nFxXchain,chainId:2});for(var t=0;t<this.nFxChains;t++)this.fxChains[t][0]=new m.S9(1),this.fxChains[t][this.nNodesXfxChain-1]=new m.S9(+this.chainsGains[t])},methods:{initFxConnections:function(){for(var e=0;e<this.nFxChains;e++){for(var t=0;t<this.nNodesXfxChain-2;t++)this.fxChains[e][t].connect(this.fxChains[e][t+1].getToneReference());this.fxChains[e][this.nNodesXfxChain-2].connect(this.fxChains[e][this.nNodesXfxChain-1]),this.fxChains[e][this.nNodesXfxChain-1].connect((0,m.Y3)())}},setChainVolume:function(e,t){this.fxChains[e][this.nNodesXfxChain-1].gain=t},gainMouseDown:function(e){this.isGainSelected[e]=!0},handleMouseUp:function(e){this.isGainSelected.fill(!1)},handleMouseMove:function(e){var t=this;this.isGainSelected.forEach((function(s,n){s&&(t.chainsGains[n]=t.chainsGains[n]-Math.floor(e.movementY)/100,t.chainsGains[n]=Math.max(t.chainsGains[n],0),t.chainsGains[n]=Math.min(t.chainsGains[n],1),t.fxChains[n][t.nNodesXfxChain-1].set({gain:t.chainsGains[n]}))}))},computedFxGainKnobStyle:function(e){var t="";return 0===e&&(t=this.colors.purple.medium),1===e&&(t=this.colors.green.medium),2===e&&(t=this.colors.pink.medium),{height:100*this.chainsGains[e]+"%",top:50*(1-this.chainsGains[e])+"%",left:50*(1-this.chainsGains[e])+"%",background:t}},channelGain:function(e){var t="";return 0==e&&(t=this.colors.purple.glow),1==e&&(t=this.colors.green.glow),2==e&&(t=this.colors.pink.glow),{background:t}}},computed:{fxHost:function(){return{background:this.colors.orange.glow,border:".1vw solid "+this.colors.orange.dark,boxSizing:"border-box"}},gainList:function(){return{background:this.colors.orange.light,borderTop:".1vw solid "+this.colors.orange.dark,boxSizing:"border-box",height:"100%"}},chainHead1:function(){return{background:this.colors.purple.light}},chainHead2:function(){return{background:this.colors.green.medium}},chainHead3:function(){return{background:this.colors.pink.light}},fxBack:function(){return{position:"relative",height:"100%",width:"100%",background:this.colors.orange.light}}}},ot=(0,r.Z)(it,[["render",Ee],["__scopeId","data-v-1dd12caa"]]),at=ot;function rt(e,t,s,n,o,a){var r=(0,i.up)("SpecAnalyzer"),l=(0,i.up)("Oscilloscope"),c=(0,i.up)("Meter");return(0,i.wg)(),(0,i.iD)("div",{class:"toolsHost",style:(0,g.j5)(this.toolsHost)},[(0,i.Wm)(r),(0,i.Wm)(l,{ref:"oscilloscope"},null,512),(0,i.Wm)(c)],4)}var lt=function(e){return(0,i.dD)("data-v-c5d289ba"),e=e(),(0,i.Cn)(),e},ct={class:"signalSum"},ht=lt((function(){return(0,i._)("div",null,null,-1)}));function ut(e,t,s,n,o,a){return(0,i.wg)(),(0,i.iD)("div",{class:"meter",style:(0,g.j5)(this.Meter)},[(0,i._)("div",ct,[(0,i._)("div",{ref:"left",class:"signal",style:(0,g.j5)(a.computedWidthLeft)},null,4),ht,(0,i._)("div",{ref:"right",class:"signal",style:(0,g.j5)(a.computedWidthRight)},null,4)])],4)}var dt=s(8818);const ft={data:function(){return{widthLeft:0,widthRight:0}},computed:{computedWidthLeft:function(){return{width:"".concat(this.widthLeft,"%"),background:this.colors.green.medium}},computedWidthRight:function(){return{width:"".concat(this.widthRight,"%"),background:this.colors.green.medium}},Meter:function(){return{background:this.colors.green.glow}}},mounted:function(){var e=this;this.meter=new m.Yu({channels:2}),m.Y3().connect(this.meter),this.intervalId=setInterval((function(){e.updateWidths()}),25)},methods:{updateWidths:function(){var e=this.meter.getValue(),t=(0,dt.Z)(e,2);this.leftVolume=t[0],this.rightVolume=t[1],(isFinite(this.leftVolume)||isFinite(this.rightVolume))&&(this.widthLeft=Math.min(100*(0,m.xz)(this.leftVolume),100),this.widthRight=Math.min(100*(0,m.xz)(this.rightVolume),100))}},beforeDestroy:function(){this.meter.stop(),this.meter.dispose(),clearInterval(this.intervalId)}},pt=(0,r.Z)(ft,[["render",ut],["__scopeId","data-v-c5d289ba"]]),vt=pt;var mt={class:"oscilloscope"};function gt(e,t,s,n,o,a){return(0,i.wg)(),(0,i.iD)("div",mt,[(0,i._)("canvas",{ref:"canvas",class:"oscilloscopeCanvas",style:(0,g.j5)(this.oscilloscopeCanvas)},null,4)])}const yt={data:function(){return{oscilloscopeData:[],timing:10}},mounted:function(){this.oscilloscope=new m.uc,m.Y3().connect(this.oscilloscope),this.startOscilloscope(),this.canvas=this.$refs.canvas,this.canvas.width=4*this.canvas.offsetWidth,this.canvas.height=4*this.canvas.offsetHeight,this.ctx=this.canvas.getContext("2d")},methods:{setTiming:function(e){this.timing=e,clearInterval(this.intervalId),this.startOscilloscope()},startOscilloscope:function(){var e=this;this.intervalId=setInterval((function(){e.updateOscilloscopeData()}),this.timing)},draw:function(e){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.strokeStyle="#658060",this.ctx.lineWidth=6,this.ctx.beginPath();for(var t=0;t<e.length;t++){var s=t*(this.canvas.width/e.length),n=this.canvas.height/2*(1-e[t]);this.ctx.moveTo(s,n),this.ctx.lineTo(s+this.canvas.width/e.length,n)}this.ctx.stroke(),this.ctx.moveTo(0,0)},updateOscilloscopeData:function(){this.oscilloscopeData=this.oscilloscope.getValue(),this.draw(this.oscilloscopeData)}},computed:{oscilloscopeCanvas:function(){return{background:this.colors.green.glow}}},beforeDestroy:function(){this.oscilloscope.dispose()}},wt=(0,r.Z)(yt,[["render",gt]]),kt=wt;var bt={class:"spectral-analyzer"};function _t(e,t,s,n,o,a){return(0,i.wg)(),(0,i.iD)("div",bt,[(0,i._)("canvas",{class:"analyzerCanvas",ref:"canvas",style:(0,g.j5)(this.analyzerCanvas)},null,4)])}const Dt={data:function(){return{timing:10}},mounted:function(){this.analyser=new m.qk("fft",2048),this.canvasCtx=this.$refs.canvas.getContext("2d"),m.Y3().connect(this.analyser),this.startAnalyzer()},methods:{draw:function(){var e;this.data=this.analyser.getValue(),this.canvasCtx.strokeStyle="#658060",this.canvasCtx.clearRect(0,0,this.$refs.canvas.width,this.$refs.canvas.height);for(var t=0;t<this.data.length;t++)this.value=6*(0,m.xz)(this.data[t])*this.$refs.canvas.height,e=Math.log10(t)/Math.log10(2048)*this.$refs.canvas.width,this.canvasCtx.fillStyle="black",this.canvasCtx.fillRect(e,this.$refs.canvas.height-this.value,1,this.value)},startAnalyzer:function(){var e=this;this.intervalId=setInterval((function(){e.draw()}),10)}},computed:{analyzerCanvas:function(){return{background:this.colors.green.glow}}},beforeDestroy:function(){}},Mt=(0,r.Z)(Dt,[["render",_t]]),xt=Mt,Ct={name:"ToolsHost",components:{Meter:vt,Oscilloscope:kt,SpecAnalyzer:xt},data:function(){return{}},mounted:function(){},beforeDestroy:function(){},methods:{setOscilloscopeTiming:function(e){var t=1/m.Di(e)*1e3;this.$refs["oscilloscope"].setTiming(t)}},computed:{toolsHost:function(){return{background:this.colors.green.light}}}},It=(0,r.Z)(Ct,[["render",rt]]),Lt=It;function Ft(e,t,s,n,o,a){var r=(0,i.up)("VolEnvelope"),l=(0,i.up)("Envelope"),c=(0,i.up)("Lfo"),h=(0,i.up)("ModSelector");return(0,i.wg)(),(0,i.iD)("div",{class:"modHost",style:(0,g.j5)(a.modHost)},[(0,i.Wm)(r,{ref:"volEnvelope"},null,512),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.envList,(function(e){return(0,i.wg)(),(0,i.j4)(l,{key:e.id,id:e.id,ref_for:!0,ref:"envelopes",onIsDraggableUpdate:a.handleDraggableUpdate},null,8,["id","onIsDraggableUpdate"])})),128)),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.lfoList,(function(e){return(0,i.wg)(),(0,i.j4)(c,{key:e.id,id:e.id,ref_for:!0,ref:"lfos"},null,8,["id"])})),128)),(0,i.Wm)(h,{onSelection:a.changeSelection,ref:"modSelector"},null,8,["onSelection"])],4)}s(9254);var Ut=function(e){return(0,i.dD)("data-v-24c79e62"),e=e(),(0,i.Cn)(),e},jt=Ut((function(){return(0,i._)("div",null,null,-1)}));function $t(e,t,s,n,o,a){var r=(0,i.up)("EnvelopeVisualizer"),l=(0,i.up)("Knobs");return(0,i.wg)(),(0,i.iD)("div",{ref:"container",class:"container hidden",style:(0,g.j5)(this.container)},[(0,i._)("div",{class:"border",style:(0,g.j5)(this.border)},[(0,i.Wm)(r,{ref:"visualizer",is_volume:!1,onParamRefresh:a.handleRefresh},null,8,["onParamRefresh"]),(0,i.Wm)(l,{ref:"knobs",type:"envelope",id:this.id,parameters:this.parameters,onIsDraggableUpdate:a.handleDraggableUpdate},null,8,["id","parameters","onIsDraggableUpdate"]),jt],4)],4)}s(8764);var Pt=function(e){return(0,i.dD)("data-v-245c68f8"),e=e(),(0,i.Cn)(),e},Ot={class:"knobs"},zt=["onMousedown"],Nt=Pt((function(){return(0,i._)("div",{class:"knob_fader_background"},null,-1)}));function Et(e,t,s,n,o,a){return(0,i.wg)(),(0,i.iD)("div",Ot,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.knobList,(function(e){return(0,i.wg)(),(0,i.iD)("div",{key:e.id,ref_for:!0,ref:e.ref,class:"knob",onMousedown:function(t){return a.mouseDown(e.id)}},[Nt,!0===e.isOn?((0,i.wg)(),(0,i.iD)("div",{key:0,class:"knob_fader",style:(0,g.j5)(a.computedFaderStyle(e.id))},null,4)):(0,i.kq)("",!0)],40,zt)})),128))])}const Tt={props:["type","id","parameters"],name:"Knobs",data:function(){return{knobList:[],freeKnobs:this.nKnobs,isMouseDown:!1,selectedKnobId:""}},mounted:function(){for(var e=0;e<this.nKnobs;e++)this.knobList.push({id:e,ref:"knob"+e,isOn:!1,amount:0,object:null,target:null});this.isDraggable[this.type][this.id]=!0},methods:{updateParameters:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.parameters,t=0;t<this.nKnobs;t++)if(this.knobList[t].isOn){this.knobList[t].object.setModulatorParameters(this.type,this.knobList[t].target,e);break}},knobText:function(e){return!0===this.knobList[e].isOn?this.knobList[e].amount:"yo"},addLink:function(e,t,s){for(var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.parameters,i=0;i<this.nKnobs;i++)if(!this.knobList[i].isOn){this.knobList[i].color=s,this.knobList[i].isOn=!0,this.knobList[i].amount=.5,this.knobList[i].object=e,this.knobList[i].target=t,this.freeKnobs-=1,console.log("ADDING LINK"),console.log(n),e.setModulatorParameters(this.type,t,n),e.setModulatorAmount(this.type,t,this.knobList[i].amount);break}0===this.freeKnobs&&(this.isDraggable[this.type][this.id]=!1),this.$emit("isDraggableUpdate",this.isDraggable)},removeLink:function(e,t){var s=this;this.knobList.forEach((function(n){n.amount=n.amount+.01,n.amount=n.amount-.01,n=(0,J.IU)(n),n.object===e&&n.target===t&&(n.object.setModulatorAmount(s.type,t,0),n.amount=0,n.isOn=!1,n.object=null,n.target=null)})),this.freeKnobs++,this.isDraggable[this.type][this.id]=!0},handleMouseMove:function(e){this.isMouseDown&&this.knobList[this.selectedKnobId].isOn&&(this.knobList[this.selectedKnobId].amount=this.knobList[this.selectedKnobId].amount-Math.floor(e.movementY)/100,this.knobList[this.selectedKnobId].amount=Math.max(this.knobList[this.selectedKnobId].amount,0),this.knobList[this.selectedKnobId].amount=Math.min(this.knobList[this.selectedKnobId].amount,1),this.knobList[this.selectedKnobId].object.setModulatorAmount(this.type,this.knobList[this.selectedKnobId].target,this.knobList[this.selectedKnobId].amount))},mouseDown:function(e){this.isMouseDown=!0,this.selectedKnobId=e},computedFaderStyle:function(e){var t=this.knobList[e].amount;return{backgroundColor:this.knobList[e].color,height:(100*t).toString()+"%"}},handleMouseUp:function(){this.isMouseDown=!1}},computed:{}},Rt=(0,r.Z)(Tt,[["render",Et],["__scopeId","data-v-245c68f8"]]),Ht=Rt;function qt(e,t,s,n,o,a){var r=(0,i.up)("EnvelopeVisualizer");return(0,i.wg)(),(0,i.iD)("div",{ref:"container",class:"container hidden",style:(0,g.j5)(this.container)},[(0,i._)("div",{class:"border",style:(0,g.j5)(this.border)},[(0,i.Wm)(r,{ref:"visualizer",is_volume:!0,onParamRefresh:a.handleRefresh},null,8,["onParamRefresh"])],4)],4)}function St(e,t,s,n,o,a){return(0,i.wg)(),(0,i.iD)("div",{class:"envelope_container",style:(0,g.j5)(this.envelope_container)},[(0,i._)("div",{class:"envelope",ref:"envelope",style:(0,g.j5)(this.adsr)},[(0,i._)("div",{class:"attack_area",style:(0,g.j5)(a.attack_area),onMousedown:t[0]||(t[0]=function(e){return a.attack_down()})},null,36),(0,i._)("div",{class:"decay_area",style:(0,g.j5)(a.decay_area),onMousedown:t[1]||(t[1]=function(e){return a.decay_down()})},null,36),(0,i._)("div",{class:"sustain_area",style:(0,g.j5)(a.sustain_area),onMousedown:t[2]||(t[2]=function(e){return a.sustain_down()})},null,36),(0,i._)("div",{class:"release_area",style:(0,g.j5)(a.release_area),onMousedown:t[3]||(t[3]=function(e){return a.release_down()})},null,36),(0,i._)("div",{class:"attack_dot",style:(0,g.j5)(a.attack_dot),onMousedown:t[4]||(t[4]=function(e){return a.attack_down()})},null,36),(0,i._)("div",{class:"decay_dot",style:(0,g.j5)(a.decay_dot),onMousedown:t[5]||(t[5]=function(e){return a.decay_down()})},null,36),(0,i._)("div",{class:"release_dot",style:(0,g.j5)(a.release_dot),onMousedown:t[6]||(t[6]=function(e){return a.release_down()})},null,36),(0,i._)("div",{class:"attack",style:(0,g.j5)(this.attack)},[(0,i._)("div",{class:"attack_color",style:(0,g.j5)(this.attack_Color)},null,4)],4),(0,i._)("div",{class:"decay",style:(0,g.j5)(this.decay)},[(0,i._)("div",{class:"decay_head",style:(0,g.j5)(this.decay_head)},null,4),(0,i._)("div",{class:"decay_color",style:(0,g.j5)(this.decay_Color)},null,4)],4),(0,i._)("div",{class:"sustain",style:(0,g.j5)(this.sustain)},[(0,i._)("div",{class:"sustain_head",style:(0,g.j5)(this.sustain_head)},null,4),(0,i._)("div",{class:"sustain_color",style:(0,g.j5)(this.sustain_Color)},null,4)],4),(0,i._)("div",{class:"release",style:(0,g.j5)(this.release)},[(0,i._)("div",{class:"release_color",style:(0,g.j5)(this.release_Color)},null,4)],4),(0,i._)("div",{class:"space",style:(0,g.j5)(this.space)},null,4)],4)],4)}const Kt={props:["is_volume"],data:function(){return{type:"envelope",parameters:{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"linear",sustain:.1,releaseCurve:"linear",release:.1,sustain_lev:.5,duration:4},is_attack_down:!1,is_decay_down:!1,is_sustain_down:!1,is_release_down:!1,test:10}},mounted:function(){},methods:{handleMouseMove:function(e){this.isDragging&&(this.tempEvent=e);var t=this.parameters;if(this.is_attack_down&&(e.movementX>0&&(t.attack=Math.min(t.attack+e.movementX/this.$refs.envelope.offsetWidth,1-(t.decay+t.sustain+t.release))),e.movementX<0&&(t.attack=Math.max(t.attack+e.movementX/this.$refs.envelope.offsetWidth,0))),this.is_decay_down&&(e.movementX>0&&(t.decay=Math.min(t.decay+e.movementX/this.$refs.envelope.offsetWidth,1-(t.attack+t.sustain+t.release))),e.movementX<0&&(t.decay=Math.max(t.decay+e.movementX/this.$refs.envelope.offsetWidth,0)),e.movementY>0?t.sustain_lev=Math.max(t.sustain_lev-e.movementY/100,0):e.movementY<0&&(t.sustain_lev=Math.min(t.sustain_lev-e.movementY/100,1))),this.is_sustain_down&&(e.movementX>0&&(t.decay=Math.min(t.decay+e.movementX/this.$refs.envelope.offsetWidth,1-(t.attack+t.sustain+t.release))),e.movementX<0&&(t.decay=Math.max(t.decay+e.movementX/this.$refs.envelope.offsetWidth,0)),e.movementY>0?t.sustain_lev=Math.max(t.sustain_lev-e.movementY/100,0):e.movementY<0&&(t.sustain_lev=Math.min(t.sustain_lev-e.movementY/100,1))),this.is_release_down&&(e.movementX>0&&(t.release=Math.min(t.release+e.movementX/this.$refs.envelope.offsetWidth,1-(t.decay+t.sustain+t.attack))),e.movementX<0&&(t.release=Math.max(t.release+e.movementX/this.$refs.envelope.offsetWidth,0))),this.is_attack_down||this.is_decay_down||this.is_sustain_down||this.is_release_down){var s={attack:this.parameters.attack*this.parameters.duration,decay:this.parameters.decay*this.parameters.duration,sustain:this.parameters.sustain_lev,release:this.parameters.release*this.parameters.duration};this.$emit("paramRefresh",s)}},handleMouseUp:function(){this.is_attack_down=!1,this.is_decay_down=!1,this.is_sustain_down=!1,this.is_release_down=!1},attack_down:function(){this.is_attack_down||(this.is_attack_down=!0)},decay_down:function(){this.is_decay_down||(this.is_decay_down=!0)},sustain_down:function(){this.is_sustain_down||(this.is_sustain_down=!0)},release_down:function(){this.is_release_down||(this.is_release_down=!0)}},computed:{envelope_container:function(){var e="";return e=this.$props["is_volume"]?this.colors.pink.medium:this.colors.azure.medium,{background:e}},adsr:function(){var e="";return e=this.$props["is_volume"]?"#f8e7e6":"#ceeae7",{display:"grid",opacity:"100%",background:e,gridTemplateColumns:100*this.parameters.attack+"% "+Math.ceil(100*this.parameters.decay)+"% "+Math.ceil(100*this.parameters.sustain)+"% "+Math.ceil(100*this.parameters.release)+"% 10% "}},attack:function(){return{height:"100%",width:"100%",clipPath:"polygon(0% 100%, 100% 0%, 100% 100%)"}},decay:function(){return{height:"100%"}},sustain:function(){return{display:"grid",gridTemplateRows:100*(1-this.parameters.sustain_lev)+"% "+100*this.parameters.sustain_lev+"%",height:"100%"}},release:function(){return{height:"100%",clipPath:"polygon(0% "+100*(1-this.parameters.sustain_lev)+"%, 0% 100%, 100% 100%)"}},attack_Color:function(){var e="";return e=this.$props["is_volume"]?this.colors.pink.dark:this.colors.azure.dark,{height:"100%",background:e}},decay_Color:function(){var e="";return e=this.$props["is_volume"]?this.colors.pink.medium:this.colors.azure.medium,{position:"relative",height:"100%",background:e,top:100*(this.parameters.sustain_lev-1)+"%"}},sustain_Color:function(){var e="";return e=this.$props["is_volume"]?this.colors.pink.light:this.colors.azure.light,{zIndex:"1",height:"100%",background:e}},release_Color:function(){var e="";return e=this.$props["is_volume"]?this.colors.pink.light:this.colors.azure.light,{height:"100%",background:e,opacity:"60%"}},decay_head:function(){var e="";return e=this.$props["is_volume"]?"#f8e7e6":"#ceeae7",{position:"relative",zIndex:"3",background:e,opacity:"100%",top:"-1%",clipPath:"polygon(0% 0%, 100% 100%, 100% 0%)",height:100*(1-this.parameters.sustain_lev)+"%",width:"102%"}},sustain_head:function(){return{background:"transparent"}},attack_dot:function(){var e="",t="";return this.$props["is_volume"]?(e=this.colors.pink.dark,t=this.colors.pink.glow):(e=this.colors.azure.dark,t=this.colors.azure.glow),{border:".1vw solid "+t,background:e,aspectRatio:"1/1",height:"7%",position:"absolute",zIndex:"4",borderRadius:"50%",left:100*this.parameters.attack-1+"%",top:"-2%"}},decay_dot:function(){var e="",t="";return this.$props["is_volume"]?(e=this.colors.pink.medium,t=this.colors.pink.dark):(e=this.colors.azure.medium,t=this.colors.azure.dark),{border:".1vw solid "+t,background:e,aspectRatio:"1/1",height:"7%",position:"absolute",zIndex:"5",borderRadius:"50%",left:100*(this.parameters.decay+this.parameters.attack)-.9+"%",top:100*(1-this.parameters.sustain_lev)-5+"%"}},release_dot:function(){var e="",t="";return this.$props["is_volume"]?(e=this.colors.pink.glow,t=this.colors.pink.dark):(e=this.colors.azure.glow,t=this.colors.azure.dark),{border:".1vw solid "+t,opacity:"60%",background:e,aspectRatio:"1/1",height:"7%",position:"absolute",zIndex:"2",borderRadius:"50%",left:100*(this.parameters.attack+this.parameters.decay+this.parameters.sustain+this.parameters.release)-1+"%",top:"95%"}},space:function(){return{background:"transparent"}},attack_area:function(){return{background:"transparent",aspectRatio:"1/1",width:"10%",position:"absolute",zIndex:"4",borderRadius:"50%",left:100*this.parameters.attack-5+"%"}},decay_area:function(){return{background:"transparent",aspectRatio:"1/1",width:"10%",position:"absolute",zIndex:"4",borderRadius:"50%",left:100*(this.parameters.decay+this.parameters.attack)-5+"%",top:100*(1-this.parameters.sustain_lev)-20+"%"}},sustain_area:function(){return{background:"transparent",aspectRatio:"16/9",width:"10%",position:"absolute",zIndex:"4",borderRadius:"50%",left:100*(this.parameters.attack+this.parameters.decay+this.parameters.sustain)-10+"%",top:100*(1-this.parameters.sustain_lev)-12+"%"}},release_area:function(){return{background:"transparent",aspectRatio:"1/1",width:"7%",position:"absolute",zIndex:"4",borderRadius:"50%",left:100*(this.parameters.attack+this.parameters.decay+this.parameters.sustain+this.parameters.release)-5+"%",top:"80%"}}}},Gt=(0,r.Z)(Kt,[["render",St],["__scopeId","data-v-e11eb42e"]]),Vt=Gt,At={props:["id"],components:{EnvelopeVisualizer:Vt},data:function(){return{tempEvent:null,type:"envelope",parameters:{},knobList:[],is_attack_down:!1,is_decay_down:!1,is_sustain_down:!1,is_release_down:!1}},mounted:function(){this.parameters={attack:.1,attackCurve:"linear",decay:.5,decayCurve:"linear",sustain:.5,releaseCurve:"linear",release:1,scale:1};for(var e=0;e<9;e++)this.knobList.push({id:e,ref:"knob"+e})},methods:{handleRefresh:function(e){var t=this;this.parameters=e,this.synths.list.forEach((function(e){e.setModulatorParameters("envelope","vol",t.parameters)}))},handleNewOsc:function(){var e=this;this.synths.list.forEach((function(t){t.setModulatorParameters("envelope","vol",e.parameters)}))},unHide:function(){this.$refs.container.classList.remove("hidden")},hide:function(){this.$refs.container.classList.add("hidden")},handleMouseMove:function(e){this.$refs.visualizer.handleMouseMove(e)},handleMouseUp:function(e){this.$refs.visualizer.handleMouseUp(e)}},computed:{border:function(){return{background:"#f8e7e6",opacity:"100%"}},container:function(){return{background:this.colors.pink.medium}}}},Wt=(0,r.Z)(At,[["render",qt],["__scopeId","data-v-480d7e20"]]),Xt=Wt;var Yt={class:"lfo_controls_column"},Zt={key:0,class:"lfo_waveform_btn_icon",src:I,alt:"",draggable:"false"},Bt={key:1,class:"lfo_waveform_btn_icon",src:L,alt:"",draggable:"false"},Jt={key:2,class:"lfo_waveform_btn_icon",src:U,alt:"",draggable:"false"},Qt={key:3,class:"lfo_waveform_btn_icon",src:F,alt:"",draggable:"false"};function es(e,t,s,n,o,a){var r=(0,i.up)("LfoVisualizer"),l=(0,i.up)("Knobs");return(0,i.wg)(),(0,i.iD)("div",{ref:"container",class:"container hidden",style:(0,g.j5)(this.container)},[(0,i._)("div",{class:"border",style:(0,g.j5)(this.border)},[(0,i._)("div",{class:"lfo_elems_row",style:(0,g.j5)(this.lfo_elems_row)},[(0,i.Wm)(r,{ref:"visualizer",freq:this.freq,depth:this.depth,wave:this.waveform},null,8,["freq","depth","wave"]),(0,i._)("div",Yt,[(0,i._)("div",{class:"lfoFaderBase freqFader",style:(0,g.j5)(this.lfoFaderBase),onMousedown:t[0]||(t[0]=function(e){return o.isFreqFaderDown=!0})},[(0,i._)("div",{class:"lfoFreqFaderLevel",style:(0,g.j5)(this.lfoFreqFaderLevel)},null,4)],36),(0,i._)("div",{class:"lfo_waveform-btn-selector",style:(0,g.j5)(a.lfo_waveform_btn_selector),onClick:t[1]||(t[1]=function(){return a.nextWaveType&&a.nextWaveType.apply(a,arguments)})},["sine"===this.waveform?((0,i.wg)(),(0,i.iD)("img",Zt)):(0,i.kq)("",!0),"triangle"===this.waveform?((0,i.wg)(),(0,i.iD)("img",Bt)):(0,i.kq)("",!0),"square"===this.waveform?((0,i.wg)(),(0,i.iD)("img",Jt)):(0,i.kq)("",!0),"sawtooth"===this.waveform?((0,i.wg)(),(0,i.iD)("img",Qt)):(0,i.kq)("",!0)],4)])],4),(0,i.Wm)(l,{ref:"knobs",type:"lfo",id:this.id,parameters:this.parameters},null,8,["id","parameters"])],4)],4)}var ts={class:"lfoOscilloscope"};function ss(e,t,s,n,o,a){return(0,i.wg)(),(0,i.iD)("div",ts,[(0,i._)("canvas",{ref:"canvas",class:"lfoOscilloscopeCanvas",style:(0,g.j5)(this.oscilloscopeCanvas)},null,4)])}var ns=50,is=new Array(ns).fill(0),os=new Array(ns).fill(0),as=new Array(ns).fill(0),rs=new Array(ns).fill(0);const ls={components:{},props:["freq","depth","wave"],data:function(){return{timing:10,intervalId:"",waveform:this.wave}},mounted:function(){this.timing=1e3/(ns*this.$props.freq);for(var e=0;e<ns;e++)is[e]=Math.sin(2*Math.PI/ns*e)*this.$props.depth,os[e]=this.$props.depth-2*Math.abs(2*(e-ns/2)/ns)*this.$props.depth,as[e]=e>=ns/2?this.$props.depth:-this.$props.depth,rs[e]=this.depth*(2*e/ns-1);switch(this.waveform){case"sine":this.oscilloscopeData=is;break;case"triangle":this.oscilloscopeData=os;break;case"square":this.oscilloscopeData=as;break;case"sawtooth":this.oscilloscopeData=rs;break;default:console.log("ERROR - waveform not recognised")}this.canvas=this.$refs.canvas,this.canvas.width=4*this.canvas.offsetWidth,this.canvas.height=4*this.canvas.offsetHeight,this.ctx=this.canvas.getContext("2d")},methods:{updateParams:function(e){var t=this,s=e.freq,n=(void 0===s&&this.$props.freq,e.depth),o=(void 0===n&&this.$props.depth,e.waveform),a=void 0===o?this.waveform:o;switch(this.waveform=a,this.timing=1e3/(ns*this.$props.freq),this.waveform){case"sine":this.oscilloscopeData=is;break;case"triangle":this.oscilloscopeData=os;break;case"square":this.oscilloscopeData=as;break;case"sawtooth":this.oscilloscopeData=rs;break;default:console.log("ERROR - waveform not recognised")}this.intervalId&&clearInterval(this.intervalId),this.stopOscilloscope(),(0,i.Y3)((function(){t.startOscilloscope()}))},startOscilloscope:function(){var e=this;this.canvas.width=4*this.canvas.offsetWidth,this.canvas.height=4*this.canvas.offsetHeight,this.intervalId=setInterval((function(){var t=e.oscilloscopeData.shift();e.oscilloscopeData.push(t),e.draw(e.oscilloscopeData)}),this.timing)},stopOscilloscope:function(){this.intervalId&&clearInterval(this.intervalId)},draw:function(e){var t,s,n;this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.strokeStyle="black",this.ctx.lineWidth=2,this.ctx.beginPath(),n=this.canvas.height/2*(1-e[0]).toFixed(3);for(var i=1;i<e.length;i++)s=n,t=i*(this.canvas.width/e.length).toFixed(3),n=this.canvas.height/2*(1-e[i]).toFixed(3),this.ctx.moveTo(t,s),this.ctx.lineTo(t+this.canvas.width/e.length,n);this.ctx.stroke(),this.ctx.moveTo(0,0)},beforeDestroy:function(){this.oscilloscope&&(this.oscilloscope.disconnect(),this.oscilloscope.dispose())}},computed:{oscilloscopeCanvas:function(){return{background:this.colors.purple.glow}}}},cs=(0,r.Z)(ls,[["render",ss]]),hs=cs;var us=["sine","triangle","square","sawtooth"];const ds={components:{LfoVisualizer:hs,Knobs:Ht},props:["id"],data:function(){return{freq:10,depth:.8,isDepthFaderDown:!1,isFreqFaderDown:!1,waveform:us[0],waveformId:0,parameters:{}}},mounted:function(){this.parameters={frequency:this.freq,waveform:this.waveform}},computed:{lfoDepthFaderLevel:function(){return{top:(85*(1-this.depth)).toString()+"%"}},lfo_elems_row:function(){return{background:this.colors.purple.medium}},lfoFaderBase:function(){return{background:this.colors.purple.glow}},lfoFreqFaderLevel:function(){return{top:((20-this.freq)/20*85).toString()+"%",background:this.colors.purple.light,borderColor:this.colors.purple.dark}},lfo_waveform_btn_selector:function(){return{borderColor:this.colors.purple.dark,background:this.colors.purple.light,color:this.colors.gray.dark}},container:function(){return{background:this.colors.purple.glow}},border:function(){return{background:this.colors.purple.glow}}},methods:{setParams:function(e){var t=this,s=e.freq,n=void 0===s?this.freq:s,i=e.depth,o=void 0===i?this.depth:i,a=e.waveform,r=void 0===a?this.waveform:a;this.freq=n<=20?n:20,"number"===typeof r?(this.waveformId=r,0===this.waveformId||1===this.waveformId?this.waveform=us[this.waveformId]:console.log("ERROR: Called Non existing lfo wave type Id")):"string"===typeof r&&(this.waveform=r,us.forEach((function(e,s){e===t.waveform&&(t.waveformId=s)}))),this.parameters.waveform=this.waveform,this.depth=o,this.$refs.visualizer.updateParams({freq:this.freq,depth:this.depth}),this.$refs.knobs.updateParameters(this.parameters)},nextWaveType:function(){this.waveformId++,this.waveformId>us.length-1&&(this.waveformId=0),this.waveform=us[this.waveformId],this.parameters.waveform=this.waveform,this.$refs.knobs.updateParameters(this.parameters),this.$refs.visualizer.updateParams({waveform:this.waveform,frequency:this.freq})},startOscilloscope:function(){this.$refs.visualizer.startOscilloscope()},stopOscilloscope:function(){this.$refs.visualizer.stopOscilloscope()},resetOscilloscope:function(){this.$refs.visualizer.stopOscilloscope(),this.$refs.visualizer.startOscilloscope()},depthFaderSelected:function(){this.isDepthFaderDown=!0},freqFaderSelected:function(){this.isFreqFaderDown=!0},handleMouseMove:function(e){this.$refs.knobs.handleMouseMove(e),this.isDepthFaderDown&&(e.movementY,this.depth=this.depth-e.movementY/100,this.depth=Math.max(this.depth,0),this.depth=Math.min(this.depth,1),this.$refs.visualizer.updateParams({depth:this.depth})),this.isFreqFaderDown&&(e.movementY,this.freq=this.freq-e.movementY/100*20,this.freq=Math.max(this.freq,1),this.freq=Math.min(this.freq,20),this.parameters.frequency=this.freq,this.$refs.visualizer.updateParams({freq:this.freq}),this.$refs.knobs.updateParameters(this.parameters))},handleMouseUp:function(){this.isFreqFaderDown&&(this.isFreqFaderDown=!1),this.isDepthFaderDown&&(this.isDepthFaderDown=!1),this.$refs.knobs.handleMouseUp()},unHide:function(){this.$refs.container.classList.remove("hidden"),this.startOscilloscope()},hide:function(){this.$refs.container.classList.add("hidden")},link:function(e,t,s){this.$refs.knobs.addLink(e,t,s)},unLink:function(e,t){this.$refs.knobs.removeLink(e,t)}}},fs=(0,r.Z)(ds,[["render",es],["__scopeId","data-v-425055ba"]]),ps=fs,vs=s.p+"img/ADSR.0372dc1c.svg",ms=s.p+"img/LFO.27316b42.svg";var gs=function(e){return(0,i.dD)("data-v-0ef4a2a4"),e=e(),(0,i.Cn)(),e},ys=gs((function(){return(0,i._)("img",{src:vs,alt:"",draggable:"false"},null,-1)})),ws=[ys],ks=["onClick"],bs=gs((function(){return(0,i._)("img",{src:vs,alt:"",draggable:"false"},null,-1)})),_s=[bs],Ds=["draggable","onDragstart"],Ms=["onClick"],xs=gs((function(){return(0,i._)("img",{src:ms,alt:"",draggable:"false"},null,-1)})),Cs=[xs],Is=["draggable","onDragstart"];function Ls(e,t,s,n,o,a){return(0,i.wg)(),(0,i.iD)("div",{class:"buttonList",style:(0,g.j5)(this.buttonList)},[(0,i._)("div",{class:"identifierVol",style:(0,g.j5)(a.buttonColor("mainEnv")),onClick:t[0]||(t[0]=function(e){return a.handleClick(null,"volEnvelope")})},ws,4),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.buttonListEnv,(function(e){return(0,i.wg)(),(0,i.iD)("div",{key:e.id,class:"button",style:(0,g.j5)(a.buttonColor("envelope"))},[(0,i._)("div",{style:(0,g.j5)(a.textId)},(0,g.zw)(e.id),5),(0,i._)("div",{class:"identifier",onClick:function(t){return a.handleClick(e.id,e.type)}},_s,8,ks),(0,i._)("div",{class:"draggableArea",draggable:a.draggability("envelope",e.id),onDragstart:function(t){return a.startDrag(t,e.id,e.type)}}," ",40,Ds)],4)})),128)),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.buttonListLfo,(function(e){return(0,i.wg)(),(0,i.iD)("div",{key:e.id,class:"button",style:(0,g.j5)(a.buttonColor("lfo"))},[(0,i._)("div",{style:(0,g.j5)(a.textId)},(0,g.zw)(e.id),5),(0,i._)("div",{class:"identifier",onClick:function(t){return a.handleClick(e.id,e.type)}},Cs,8,Ms),(0,i._)("div",{class:"draggableArea",draggable:a.draggability("lfo",e.id),onDragstart:function(t){return a.startDrag(t,e.id,e.type)}}," ",40,Is)],4)})),128))],4)}s(8862);const Fs={inject:["dropFeedback"],props:[],data:function(){return{color:{mainEnv:this.colors.pink.glow,envelope:this.colors.azure.glow,lfo:this.colors.purple.glow},type:"volEnvelope",isDraggable:this.isDraggable,buttonListEnv:[],buttonListLfo:[]}},mounted:function(){for(var e=1;e<this.nEnvelopes+1;e++)this.buttonListEnv.push({id:e,ref:"button"+e,type:"envelope"});for(var t=1;t<this.nLfo+1;t++)this.buttonListLfo.push({id:t,ref:"button"+t,type:"lfo"})},computed:{textId:function(){return{fontWeight:"bold",opacity:"80%",position:"absolute",fontSize:".8vw"}},buttonList:function(){switch(this.type){case"volEnvelope":return{backgroundColor:this.colors.pink.medium};case"envelope":return{backgroundColor:this.colors.azure.medium};case"lfo":return{backgroundColor:this.colors.purple.glow}}}},methods:{draggability:function(e,t){return this.isDraggable[e][t]},isDraggableUpdate:function(e){this.isDraggable=e},buttonColor:function(e){return{backgroundColor:this.color[e]}},startDrag:function(e,t,s){e.dataTransfer.dropEffect="move",e.dataTransfer.effectAllowed="move";var n={type:s,id:t,color:this.color[s]};e.dataTransfer.setData("data",JSON.stringify(n))},handleClick:function(e,t){this.type=t,"volEnvelope"===t?this.$emit("selection",t,null):this.$emit("selection",e,t)}}},Us=(0,r.Z)(Fs,[["render",Ls],["__scopeId","data-v-0ef4a2a4"]]),js=Us,$s={components:{EnvelopeVisualizer:Vt,Knobs:Ht},props:["id"],data:function(){return{parameters:{attack:.025,attackCurve:"linear",decay:.25,decayCurve:"linear",releaseCurve:"linear",release:.25,sustain:.5}}},methods:{handleRefresh:function(e){this.parameters=e,this.$refs.knobs.updateParameters(this.parameters)},link:function(e,t,s){this.$refs.knobs.addLink(e,t,s)},unLink:function(e,t){this.$refs.knobs.removeLink(e,t)},handleDraggableUpdate:function(e){this.$emit("isDraggableUpdate",e)},unHide:function(){this.$refs.container.classList.remove("hidden")},hide:function(){this.$refs.container.classList.add("hidden")},handleMouseMove:function(e){this.$refs.visualizer.handleMouseMove(e),this.$refs.knobs.handleMouseMove(e)},handleMouseUp:function(e){this.$refs.visualizer.handleMouseUp(e),this.$refs.knobs.handleMouseUp(e)}},computed:{border:function(){return{background:"#ceeae7"}},container:function(){return{background:this.colors.azure.medium}}}},Ps=(0,r.Z)($s,[["render",$t],["__scopeId","data-v-24c79e62"]]),Os=Ps,zs={components:{VolEnvelope:Xt,Envelope:Os,Lfo:ps,ModSelector:js},data:function(){return{name:"modHost",selection:"volEnvelope",selectionType:null,envList:[],lfoList:[]}},created:function(){for(var e=1;e<this.nEnvelopes+1;e++)this.envList.push({id:e,ref:e});for(var t=1;t<this.nLfo+1;t++)this.lfoList.push({id:t,ref:t})},mounted:function(){this.$refs.volEnvelope.unHide(),document.addEventListener("link",this.handleLink),document.addEventListener("unLink",this.handleUnlink)},computed:{modHost:function(){return{background:this.colors.gray.glow}}},methods:{handleDraggableUpdate:function(e){this.$refs.modSelector.isDraggableUpdate(e)},handleNewOsc:function(){this.$refs.volEnvelope.handleNewOsc()},handleMouseUp:function(e){"volEnvelope"===this.selection?this.$refs.volEnvelope.handleMouseUp(e):("envelope"===this.selectionType&&(0,J.IU)((0,J.IU)(this.$refs.envelopes)[this.selection-1]).handleMouseUp(e),"lfo"===this.selectionType&&(0,J.IU)((0,J.IU)(this.$refs.lfos)[this.selection-1]).handleMouseUp(e))},handleMouseMove:function(e){"volEnvelope"===this.selection?this.$refs.volEnvelope.handleMouseMove(e):("envelope"===this.selectionType&&(0,J.IU)((0,J.IU)(this.$refs.envelopes)[this.selection-1]).handleMouseMove(e),"lfo"===this.selectionType&&(0,J.IU)((0,J.IU)(this.$refs.lfos)[this.selection-1]).handleMouseMove(e))},changeSelection:function(e,t){"volEnvelope"===this.selection?this.$refs.volEnvelope.hide():("envelope"===this.selectionType&&(0,J.IU)((0,J.IU)(this.$refs.envelopes)[this.selection-1]).hide(),"lfo"===this.selectionType&&((0,J.IU)((0,J.IU)(this.$refs.lfos)[this.selection-1]).hide(),(0,J.IU)((0,J.IU)(this.$refs.lfos)[this.selection-1]).stopOscilloscope())),"volEnvelope"===e?this.$refs.volEnvelope.unHide():("envelope"===t&&(0,J.IU)((0,J.IU)(this.$refs.envelopes)[e-1]).unHide(),"lfo"===t&&(0,J.IU)((0,J.IU)(this.$refs.lfos)[e-1]).unHide()),this.selection=e,this.selectionType=t},handleLink:function(e){var t=e.detail;this.$refs[t.modulator.type+"s"][t.modulator.id-1].link(t.object,t.target,t.color)},handleUnlink:function(e){var t=e.detail;this.$refs[t.modulator.type+"s"][t.modulator.id-1].unLink(t.object,t.target)}}},Ns=(0,r.Z)(zs,[["render",Ft],["__scopeId","data-v-9be86fba"]]),Es=Ns;var Ts={class:"container"},Rs={class:"container"},Hs={class:"container"};function qs(e,t,s,n,o,a){var r=(0,i.up)("Octave"),l=(0,i.up)("MIDIKeyboard");return(0,i.wg)(),(0,i.iD)("div",{class:"span",onMouseleave:t[0]||(t[0]=function(){return e.handleMouseLeave&&e.handleMouseLeave.apply(e,arguments)})},[(0,i._)("div",Ts,[(0,i.Wm)(r,{ref:"oct1",octaveNumber:1,onVirtualKeyDown:a.handleNoteDown,onVirtualKeyUp:a.handleNoteUp},null,8,["onVirtualKeyDown","onVirtualKeyUp"])]),(0,i._)("div",Rs,[(0,i.Wm)(r,{ref:"oct2",octaveNumber:2,onVirtualKeyDown:a.handleNoteDown,onVirtualKeyUp:a.handleNoteUp},null,8,["onVirtualKeyDown","onVirtualKeyUp"])]),(0,i._)("div",Hs,[(0,i.Wm)(r,{ref:"oct3",octaveNumber:3,onVirtualKeyDown:a.handleNoteDown,onVirtualKeyUp:a.handleNoteUp},null,8,["onVirtualKeyDown","onVirtualKeyUp"])]),(0,i.Wm)(l,{onMIDIDown:a.handleMIDIDown,onMIDIUp:a.handleMIDIUp},null,8,["onMIDIDown","onMIDIUp"])],32)}s(6699),s(2023),s(3948),s(1058);function Ss(e,t,s,n,i,o){return null}const Ks={data:function(){return{midiAccess:null,midiInput:null,notes:["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],lowestOctave:-2}},mounted:function(){var e=this;navigator.requestMIDIAccess().then((function(t){t.inputs.size>0&&(e.midiAccess=t,e.midiInput=t.inputs.values().next().value,e.midiInput.addEventListener("midimessage",e.handleMidiMessage))}))},methods:{handleMidiMessage:function(e){var t=(0,dt.Z)(e.data,3),s=t[0],n=t[1],i=t[2],o=this.notes[n%12],a=this.lowestOctave+parseInt(n/12,10);144==s?this.$emit("MIDIDown",o,a,i):128==s&&this.$emit("MIDIUp",o,a)}}},Gs=(0,r.Z)(Ks,[["render",Ss]]),Vs=Gs;var As={class:"woctave"},Ws={class:"boctave"};function Xs(e,t,s,n,o,a){return(0,i.wg)(),(0,i.iD)("div",{class:"octave",onMousedown:t[12]||(t[12]=function(){return a.handleMouseDown&&a.handleMouseDown.apply(a,arguments)}),onMouseup:t[13]||(t[13]=function(){return a.handleMouseUp&&a.handleMouseUp.apply(a,arguments)}),onMouseover:t[14]||(t[14]=function(){return a.handleMouseOver&&a.handleMouseOver.apply(a,arguments)})},[(0,i._)("div",As,[(0,i._)("div",{id:"C",ref:"C",onMouseleave:t[0]||(t[0]=function(){return a.handleMouseLeave&&a.handleMouseLeave.apply(a,arguments)}),class:"wkey wUnpressed"},null,544),(0,i._)("div",{id:"D",ref:"D",onMouseleave:t[1]||(t[1]=function(){return a.handleMouseLeave&&a.handleMouseLeave.apply(a,arguments)}),class:"wkey wUnpressed"},null,544),(0,i._)("div",{id:"E",ref:"E",onMouseleave:t[2]||(t[2]=function(){return a.handleMouseLeave&&a.handleMouseLeave.apply(a,arguments)}),class:"wkey wUnpressed"},null,544),(0,i._)("div",{id:"F",ref:"F",onMouseleave:t[3]||(t[3]=function(){return a.handleMouseLeave&&a.handleMouseLeave.apply(a,arguments)}),class:"wkey wUnpressed"},null,544),(0,i._)("div",{id:"G",ref:"G",onMouseleave:t[4]||(t[4]=function(){return a.handleMouseLeave&&a.handleMouseLeave.apply(a,arguments)}),class:"wkey wUnpressed"},null,544),(0,i._)("div",{id:"A",ref:"A",onMouseleave:t[5]||(t[5]=function(){return a.handleMouseLeave&&a.handleMouseLeave.apply(a,arguments)}),class:"wkey wUnpressed"},null,544),(0,i._)("div",{id:"B",ref:"B",onMouseleave:t[6]||(t[6]=function(){return a.handleMouseLeave&&a.handleMouseLeave.apply(a,arguments)}),class:"wkey wUnpressed"},null,544)]),(0,i._)("div",Ws,[(0,i._)("div",{id:"C#",ref:"Cs",onMouseleave:t[7]||(t[7]=function(){return a.handleMouseLeave&&a.handleMouseLeave.apply(a,arguments)}),class:"bkey bUnpressed",style:{"grid-column":"3 / 5"}},null,544),(0,i._)("div",{id:"D#",ref:"Ds",onMouseleave:t[8]||(t[8]=function(){return a.handleMouseLeave&&a.handleMouseLeave.apply(a,arguments)}),class:"bkey bUnpressed",style:{"grid-column":"6 / 8"}},null,544),(0,i._)("div",{id:"F#",ref:"Fs",onMouseleave:t[9]||(t[9]=function(){return a.handleMouseLeave&&a.handleMouseLeave.apply(a,arguments)}),class:"bkey bUnpressed",style:{"grid-column":"12 / 14"}},null,544),(0,i._)("div",{id:"G#",ref:"Gs",onMouseleave:t[10]||(t[10]=function(){return a.handleMouseLeave&&a.handleMouseLeave.apply(a,arguments)}),class:"bkey bUnpressed",style:{"grid-column":"15 / 17"}},null,544),(0,i._)("div",{id:"A#",ref:"As",onMouseleave:t[11]||(t[11]=function(){return a.handleMouseLeave&&a.handleMouseLeave.apply(a,arguments)}),class:"bkey bUnpressed",style:{"grid-column":"18 / 20"}},null,544)])],32)}s(9653),s(4916),s(5306),s(2479);const Ys={name:"Octave",props:{octaveNumber:Number},data:function(){return{}},methods:{handleMouseLeave:function(e){this.$parent.mouseDown&&this.notifyUp(e.currentTarget)},handleMouseUp:function(e){this.$parent.mouseDown=!1,this.notifyUp(e.target)},handleMouseDown:function(e){this.$parent.mouseDown=!0,this.notifyDown(e.target)},handleMouseOver:function(e){this.$parent.mouseDown&&this.notifyDown(e.target)},notifyDown:function(e){this.$emit("virtualKeyDown",e.id,this.octaveNumber),this.switchColorPress(e.id)},switchColorPress:function(e){e.includes("#")&&(e=e.replace("#","s"));var t=this.$refs[e];t.classList.contains("wkey")?(t.classList.remove("wUnpressed"),t.classList.add("pressed")):(t.classList.remove("bUnpressed"),t.classList.add("pressed"))},notifyUp:function(e){this.$emit("virtualKeyUp",e.id,this.octaveNumber),this.switchColorRelease(e.id)},switchColorRelease:function(e){if("all"===e)for(var t=0,s=Object.values(this.$refs);t<s.length;t++){var n=s[t];n.classList.contains("wkey")?(n.classList.add("wUnpressed"),n.classList.remove("pressed")):(n.classList.add("bUnpressed"),n.classList.remove("pressed"))}else{e.includes("#")&&(e=e.replace("#","s"));var i=this.$refs[e];i.classList.contains("wkey")?(i.classList.add("wUnpressed"),i.classList.remove("pressed")):(i.classList.add("bUnpressed"),i.classList.remove("pressed"))}}}},Zs=(0,r.Z)(Ys,[["render",Xs]]),Bs=Zs,Js={name:"PianoKeyboard",components:{Octave:Bs,MIDIKeyboard:Vs},data:function(){return{ocTranspose:1,keysDown:{},keys:"awsedftgyhujkolp",notes:["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],keyboardTranspose:0,mouseDown:!1}},mounted:function(){window.addEventListener("keydown",this.handleKeyDown),window.addEventListener("keyup",this.handleKeyUp)},beforeDestroy:function(){window.removeEventListener("keydown",this.handleKeyDown),window.removeEventListener("keyup",this.handleKeyUp)},methods:{handleMouseUp:function(){this.mouseDown=!1},handleKeyDown:function(e){if(!this.keysDown[e.key]&&this.keys.includes(e.key)){var t=this.notes[this.keys.indexOf(e.key)%12],s=parseInt(this.keys.indexOf(e.key)/12,10);this.handleNoteDown(t,2+s+this.keyboardTranspose,100),this.keysDown[e.key]=!0,2+s+this.keyboardTranspose>0&&2+s+this.keyboardTranspose<4&&this.$refs["oct"+(2+s+this.keyboardTranspose)].switchColorPress(t)}this.keysDown[e.key]||"z"!=e.key||(this.keyboardTranspose=this.keyboardTranspose-1),this.keysDown[e.key]||"x"!=e.key||(this.keyboardTranspose=this.keyboardTranspose+1)},handleKeyUp:function(e){if(this.keysDown[e.key]){var t=this.notes[this.keys.indexOf(e.key)%12],s=parseInt(this.keys.indexOf(e.key)/12,10);this.handleNoteUp(t,2+s+this.keyboardTranspose),this.keysDown[e.key]=!1,2+s+this.keyboardTranspose>0&&2+s+this.keyboardTranspose<4&&this.$refs["oct"+(2+s+this.keyboardTranspose)].switchColorRelease(t)}},handleMIDIDown:function(e,t,s){for(var n in t>0&&t<4&&this.$refs["oct"+t].switchColorPress(e),this.synths.list.forEach((function(n){n.playNote(e+t,s)})),this.filterChains)for(var i in this.filterChains[n])this.filterChains[n][i].playNote();this.$emit("noteDown",e)},handleMIDIUp:function(e,t){for(var s in t>0&&t<4&&this.$refs["oct"+t].switchColorRelease(e),this.synths.list.forEach((function(s){s.stopNote(e+t)})),this.filterChains)for(var n in this.filterChains[s])this.filterChains[s][n].stopNote()},handleNoteDown:function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,n=parseInt(t)+this.ocTranspose;for(var i in this.synths.list.forEach((function(t){t.playNote(e+n,s)})),this.filterChains)for(var o in this.filterChains[i])this.filterChains[i][o].playNote();this.$emit("noteDown",e+n)},handleNoteUp:function(e,t){var s=parseInt(t)+this.ocTranspose;for(var n in this.synths.list.forEach((function(t){t.stopNote(e+s)})),this.filterChains)for(var i in this.filterChains[n])this.filterChains[n][i].stopNote()}}},Qs=(0,r.Z)(Js,[["render",qs],["__scopeId","data-v-083b757d"]]),en=Qs,tn={name:"mainHost",components:{OscHost:le,FilterHost:Oe,FxHost:at,ToolHost:Lt,ModHost:Es,PianoKeyboard:en},data:function(){return{draggedInfo:null}},mounted:function(){m.J7.start("+0.1")},methods:{initOscConnections:function(){this.$refs.oscHost.initConnections()},handleNewOsc:function(){this.$refs.modHost.handleNewOsc()},handleMouseUp:function(e){var t=this;this.$refs.pianoKeyboard.handleMouseUp(),this.$refs.modHost.handleMouseUp(e),this.$refs.fxHost.handleMouseUp(e),this.draggedInfo&&setTimeout((function(){return t.deleteDraggedInfo("MainHost")}),100)},handleMouseMove:function(e){this.$refs.modHost.handleMouseMove(e),this.$refs.fxHost.handleMouseMove(e)},noteDownHandle:function(e){this.$refs["toolsHost"].setOscilloscopeTiming(e)},noteUpHandle:function(e){}}},sn=(0,r.Z)(tn,[["render",v]]),nn=sn;var on=[{path:"/",name:"synth",component:nn}],an=(0,h.p7)({history:(0,h.PO)("/zenyth/"),routes:on});const rn=an;var ln=(0,n.ri)(c).use(rn);ln.config.globalProperties.synths={list:[]},ln.config.globalProperties.nFilterChains=3,ln.config.globalProperties.nFiltersXchain=3,ln.config.globalProperties.areFiltersMounted=!1,ln.config.globalProperties.nFxChains=3,ln.config.globalProperties.nFxXchain=5,ln.config.globalProperties.nNodesXfxChain=7,ln.config.globalProperties.areFxMounted=!1,ln.config.globalProperties.nModulators=6,ln.config.globalProperties.nEnvelopes=3,ln.config.globalProperties.nLfo=2,ln.config.globalProperties.nKnobs=9,ln.config.globalProperties.polyphonyVoices=4,ln.config.globalProperties.filterChains=Array(ln.config.globalProperties.nFilterChains);for(var cn=0;cn<ln.config.globalProperties.nFilterChains;cn++)ln.config.globalProperties.filterChains[cn]=Array(ln.config.globalProperties.nFiltersXchain);ln.config.globalProperties.fxChains=Array(ln.config.globalProperties.nFxChains);for(var hn=0;hn<ln.config.globalProperties.nFxChains;hn++)ln.config.globalProperties.fxChains[hn]=Array(ln.config.globalProperties.nNodesXfxChain);ln.config.globalProperties.colors={green:{light:"#7fe2a6",medium:"#599e74",dark:"#335a42",glow:"#b2eeca"},yellow:{light:"#fee573",medium:"#e5ce68",dark:"#b2a051",glow:"#feefab"},azure:{light:"#8fe1d8",medium:"#81cbc2",dark:"#649e97",glow:"#b1eae4"},purple:{light:"#cdadc4",medium:"#b99cb0",dark:"#a48a9d",glow:"#e1cedc"},pink:{light:"#f3a59a",medium:"#db958b",dark:"#c2847b",glow:"#f9d2cd"},orange:{light:"#ffc16c",medium:"#e6ae61",dark:"#cc9a56",glow:"#ffd498"},gray:{light:"#a8a8a8",medium:"#868686",dark:"#111111",glow:"#f6f6f6"}},ln.config.globalProperties.dropFeedback=null,ln.provide("dropFeedback",ln.config.globalProperties.dropFeedback),ln.config.globalProperties.isDraggable={envelope:{},lfo:{}},ln.mount("#app")}},t={};function s(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,s),o.exports}s.m=e,(()=>{var e=[];s.O=(t,n,i,o)=>{if(!n){var a=1/0;for(h=0;h<e.length;h++){for(var[n,i,o]=e[h],r=!0,l=0;l<n.length;l++)(!1&o||a>=o)&&Object.keys(s.O).every((e=>s.O[e](n[l])))?n.splice(l--,1):(r=!1,o<a&&(a=o));if(r){e.splice(h--,1);var c=i();void 0!==c&&(t=c)}}return t}o=o||0;for(var h=e.length;h>0&&e[h-1][2]>o;h--)e[h]=e[h-1];e[h]=[n,i,o]}})(),(()=>{s.d=(e,t)=>{for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}})(),(()=>{s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{s.p="/zenyth/"})(),(()=>{var e={143:0};s.O.j=t=>0===e[t];var t=(t,n)=>{var i,o,[a,r,l]=n,c=0;if(a.some((t=>0!==e[t]))){for(i in r)s.o(r,i)&&(s.m[i]=r[i]);if(l)var h=l(s)}for(t&&t(n);c<a.length;c++)o=a[c],s.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return s.O(h)},n=self["webpackChunkactam"]=self["webpackChunkactam"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var n=s.O(void 0,[998],(()=>s(6418)));n=s.O(n)})();
//# sourceMappingURL=app.427c7c5a.js.map